<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRC Prediction Model Results | Mercy and Lucem Clinical Analytics</title>
  <style>
    /* ========================================================
       RESET & BASE STYLES
       ======================================================== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      scroll-behavior: smooth;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color: #333333;
      background-color: #ffffff;
      line-height: 1.6;
    }

    /* ========================================================
       MERCY BRAND COLOR VARIABLES (used via direct values)
       Primary:    Bahama Blue  #006598
       Accent:     Fiery Orange #bf5412
       Background: White #ffffff / Light Gray #f5f7fa
       Text:       Dark Gray #333333 / Headings #1a1a1a
       ======================================================== */

    /* ========================================================
       NAV BAR
       ======================================================== */
    .nav-bar {
      background-color: #006598;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 48px;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .nav-bar .nav-brand {
      color: #ffffff;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .nav-bar .nav-links {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .nav-bar .nav-links a {
      color: rgba(255, 255, 255, 0.85);
      text-decoration: none;
      font-size: 0.82rem;
      padding: 6px 14px;
      border-radius: 4px;
      transition: background-color 0.2s ease, color 0.2s ease;
      white-space: nowrap;
    }

    .nav-bar .nav-links a:hover {
      background-color: rgba(255, 255, 255, 0.15);
      color: #ffffff;
    }

    .nav-bar .nav-links a.nav-active {
      background-color: rgba(255, 255, 255, 0.2);
      color: #ffffff;
      font-weight: 600;
    }

    /* ========================================================
       HEADER
       ======================================================== */
    .header {
      background: linear-gradient(135deg, #006598 0%, #004d73 100%);
      color: #ffffff;
      padding: 48px 24px 40px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .header .subtitle {
      font-size: 1.1rem;
      font-weight: 300;
      opacity: 0.9;
      margin-bottom: 4px;
    }

    .header .header-meta {
      font-size: 0.85rem;
      opacity: 0.7;
      margin-top: 12px;
    }

    /* ========================================================
       MAIN CONTAINER
       ======================================================== */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* ========================================================
       TAB NAVIGATION
       ======================================================== */
    .tab-nav {
      display: flex;
      gap: 0;
      background-color: #ffffff;
      border-bottom: 3px solid #006598;
      padding: 0;
      margin-top: 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .tab-btn {
      padding: 14px 22px;
      border: none;
      background: transparent;
      color: #555555;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      position: relative;
      transition: color 0.2s ease, background-color 0.2s ease;
      border-bottom: 3px solid transparent;
      margin-bottom: -3px;
    }

    .tab-btn:hover {
      color: #006598;
      background-color: #f0f6fa;
    }

    .tab-btn.active {
      color: #006598;
      font-weight: 600;
      border-bottom-color: #bf5412;
      background-color: #f5f7fa;
    }

    /* ========================================================
       TAB CONTENT / PANES
       ======================================================== */
    .tab-content {
      min-height: 500px;
    }

    .tab-pane {
      display: none;
      padding: 36px 0 48px;
      animation: fadeIn 0.3s ease-in-out;
    }

    .tab-pane.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ========================================================
       SECTION HEADERS
       ======================================================== */
    .section-header {
      color: #006598;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e7ed;
    }

    h2 {
      color: #1a1a1a;
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 16px;
    }

    h3 {
      color: #1a1a1a;
      font-size: 1.15rem;
      font-weight: 600;
      margin-top: 28px;
      margin-bottom: 12px;
    }

    h4 {
      color: #333333;
      font-size: 1rem;
      font-weight: 600;
      margin-top: 20px;
      margin-bottom: 8px;
    }

    p {
      margin-bottom: 14px;
      line-height: 1.65;
    }

    /* ========================================================
       PLACEHOLDER SPANS
       ======================================================== */
    .placeholder {
      display: inline;
      padding: 2px 10px;
      border: 1.5px dashed #bf5412;
      background-color: #fff3e8;
      color: #bf5412;
      border-radius: 3px;
      font-size: 0.88em;
      font-weight: 500;
      font-family: "SF Mono", "Fira Code", "Fira Mono", "Roboto Mono", monospace;
      white-space: nowrap;
    }

    /* ========================================================
       CALLOUT BOXES
       ======================================================== */
    .callout {
      padding: 16px 20px;
      border-radius: 6px;
      margin: 20px 0;
      border-left: 4px solid #006598;
      background-color: #f0f6fa;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    .callout p:last-child {
      margin-bottom: 0;
    }

    .callout-info {
      border-left-color: #006598;
      background-color: #f0f6fa;
    }

    .callout-success {
      border-left-color: #2e7d32;
      background-color: #f1f8e9;
    }

    .callout-warning {
      border-left-color: #bf5412;
      background-color: #fff3e8;
    }

    .callout-title {
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 6px;
      font-size: 0.95rem;
    }

    /* ========================================================
       METRIC CARDS
       ======================================================== */
    .metric-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin: 24px 0;
    }

    .metric-card {
      flex: 1 1 160px;
      background: #ffffff;
      border: 1px solid #e0e7ed;
      border-radius: 8px;
      padding: 20px 16px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      transition: box-shadow 0.2s ease, transform 0.15s ease;
    }

    .metric-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .metric-card .metric-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #006598;
      margin-bottom: 6px;
      line-height: 1.2;
    }

    .metric-card .metric-label {
      font-size: 0.82rem;
      color: #666666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    /* ========================================================
       MODEL CARDS (side-by-side comparison)
       ======================================================== */
    .model-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin: 24px 0;
    }

    .model-card {
      flex: 1 1 300px;
      background: #ffffff;
      border: 1px solid #e0e7ed;
      border-radius: 10px;
      padding: 24px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
      transition: box-shadow 0.2s ease, transform 0.15s ease;
      position: relative;
      overflow: hidden;
    }

    .model-card:hover {
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .model-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #006598, #bf5412);
    }

    .model-card h3 {
      margin-top: 8px;
      color: #006598;
      font-size: 1.1rem;
    }

    .model-card p {
      font-size: 0.92rem;
      color: #555555;
    }

    .model-card .model-tag {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      margin-bottom: 10px;
    }

    .model-card .model-tag.tag-full {
      background-color: #e8f4f8;
      color: #006598;
    }

    .model-card .model-tag.tag-novisit {
      background-color: #fff3e8;
      color: #bf5412;
    }

    .model-card .model-tag.tag-nodemo {
      background-color: #f1f8e9;
      color: #2e7d32;
    }

    .model-card .model-tag.tag-fhir {
      background-color: #f3e8ff;
      color: #6f42c1;
    }

    /* ========================================================
       COMPARISON TABLE
       ======================================================== */
    .table-wrapper {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 1px 6px rgba(0, 0, 0, 0.08);
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      min-width: 500px;
    }

    .comparison-table thead th {
      background-color: #006598;
      color: #ffffff;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 0.85rem;
      letter-spacing: 0.3px;
      white-space: nowrap;
    }

    .comparison-table thead th:first-child {
      border-top-left-radius: 8px;
    }

    .comparison-table thead th:last-child {
      border-top-right-radius: 8px;
    }

    .comparison-table tbody td {
      padding: 10px 16px;
      border-bottom: 1px solid #eaeef2;
      color: #333333;
    }

    .comparison-table tbody tr:nth-child(even) {
      background-color: #f9fafb;
    }

    .comparison-table tbody tr:hover {
      background-color: #f0f6fa;
    }

    .comparison-table tbody tr:last-child td:first-child {
      border-bottom-left-radius: 8px;
    }

    .comparison-table tbody tr:last-child td:last-child {
      border-bottom-right-radius: 8px;
    }

    .comparison-table .row-label {
      font-weight: 600;
      color: #1a1a1a;
      white-space: nowrap;
    }

    /* ========================================================
       LIFT TABLE (quarters x deciles grid)
       ======================================================== */
    .lift-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82rem;
      min-width: 600px;
    }

    .lift-table thead th {
      background-color: #006598;
      color: #ffffff;
      padding: 8px 12px;
      text-align: center;
      font-weight: 600;
      font-size: 0.78rem;
      letter-spacing: 0.2px;
    }

    .lift-table thead th:first-child {
      text-align: left;
      border-top-left-radius: 6px;
    }

    .lift-table thead th:last-child {
      border-top-right-radius: 6px;
    }

    .lift-table tbody td {
      padding: 7px 12px;
      border-bottom: 1px solid #eaeef2;
      text-align: center;
      color: #333333;
    }

    .lift-table tbody td:first-child {
      text-align: left;
      font-weight: 600;
      color: #1a1a1a;
      white-space: nowrap;
    }

    .lift-table tbody tr:nth-child(even) {
      background-color: #f9fafb;
    }

    .lift-table tbody tr:hover {
      background-color: #f0f6fa;
    }

    /* ========================================================
       COLLAPSIBLE SECTIONS
       ======================================================== */
    .collapsible {
      margin: 20px 0;
      border: 1px solid #e0e7ed;
      border-radius: 8px;
      overflow: hidden;
    }

    .collapsible-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 20px;
      background-color: #f5f7fa;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.2s ease;
    }

    .collapsible-header:hover {
      background-color: #eaeef2;
    }

    .collapsible-header h4 {
      margin: 0;
      font-size: 0.95rem;
      color: #006598;
      font-weight: 600;
    }

    .collapsible-header .collapse-icon {
      font-size: 0.8rem;
      color: #006598;
      transition: transform 0.25s ease;
      font-weight: 700;
    }

    .collapsible-header .collapse-icon.open {
      transform: rotate(180deg);
    }

    .collapsible-body {
      display: none;
      padding: 16px 20px;
      background-color: #ffffff;
    }

    .collapsible-body.open {
      display: block;
    }

    /* ========================================================
       FLOW DIAGRAM (CSS-only pipeline visualization)
       ======================================================== */
    .flow-diagram {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0;
      margin: 28px 0;
      padding: 20px 0;
      justify-content: center;
    }

    .flow-step {
      background: #ffffff;
      border: 2px solid #006598;
      border-radius: 8px;
      padding: 12px 18px;
      text-align: center;
      font-size: 0.82rem;
      font-weight: 500;
      color: #006598;
      min-width: 100px;
      max-width: 160px;
      position: relative;
      box-shadow: 0 2px 6px rgba(0, 101, 152, 0.1);
      transition: box-shadow 0.2s ease, transform 0.15s ease;
    }

    .flow-step:hover {
      box-shadow: 0 4px 12px rgba(0, 101, 152, 0.2);
      transform: translateY(-1px);
    }

    .flow-step.flow-highlight {
      background: #006598;
      color: #ffffff;
      font-weight: 600;
    }

    .flow-step .flow-count {
      display: block;
      font-size: 1.1rem;
      font-weight: 700;
      margin-top: 4px;
    }

    .flow-arrow {
      font-size: 1.3rem;
      color: #bf5412;
      padding: 0 6px;
      font-weight: 700;
      flex-shrink: 0;
    }

    /* ========================================================
       BAR CHART (CSS-only horizontal bars)
       ======================================================== */
    .bar-chart {
      margin: 20px 0;
    }

    .bar-chart .bar-row {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .bar-chart .bar-label {
      width: 200px;
      font-size: 0.85rem;
      font-weight: 500;
      color: #333333;
      text-align: right;
      padding-right: 16px;
      flex-shrink: 0;
    }

    .bar-chart .bar-track {
      flex: 1;
      height: 28px;
      background-color: #eaeef2;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .bar-chart .bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.6s ease;
      display: flex;
      align-items: center;
      padding-left: 10px;
      font-size: 0.78rem;
      font-weight: 600;
      color: #ffffff;
    }

    .bar-chart .bar-fill.fill-primary {
      background: linear-gradient(90deg, #006598, #0080bf);
    }

    .bar-chart .bar-fill.fill-accent {
      background: linear-gradient(90deg, #bf5412, #d96a2b);
    }

    .bar-chart .bar-fill.fill-success {
      background: linear-gradient(90deg, #2e7d32, #43a047);
    }

    /* ========================================================
       MERCY BADGE
       ======================================================== */
    .mercy-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 0.72rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.4px;
      background-color: #e8f4f8;
      color: #006598;
    }

    /* ========================================================
       LISTS
       ======================================================== */
    ul, ol {
      margin-bottom: 14px;
      padding-left: 24px;
    }

    li {
      margin-bottom: 6px;
      line-height: 1.55;
    }

    /* ========================================================
       SECTION BACKGROUNDS
       ======================================================== */
    .section-alt {
      background-color: #f5f7fa;
      padding: 28px 24px;
      border-radius: 8px;
      margin: 24px 0;
    }

    /* ========================================================
       DIVIDER
       ======================================================== */
    .divider {
      border: none;
      border-top: 1px solid #e0e7ed;
      margin: 32px 0;
    }

    /* ========================================================
       STRONG / EMPHASIS UTILITIES
       ======================================================== */
    strong {
      font-weight: 600;
      color: #1a1a1a;
    }

    em {
      color: #555555;
    }

    .text-accent {
      color: #bf5412;
      font-weight: 600;
    }

    .text-primary {
      color: #006598;
      font-weight: 600;
    }

    .text-muted {
      color: #888888;
      font-size: 0.88rem;
    }

    /* ========================================================
       FOOTER
       ======================================================== */
    footer {
      background-color: #f5f7fa;
      border-top: 3px solid #006598;
      padding: 28px 24px;
      text-align: center;
      margin-top: 48px;
    }

    footer p {
      color: #666666;
      font-size: 0.85rem;
      margin-bottom: 4px;
    }

    footer .tagline {
      color: #006598;
      font-style: italic;
      font-size: 0.95rem;
      font-weight: 500;
      margin-top: 8px;
    }

    footer .footer-links {
      margin-top: 12px;
    }

    footer .footer-links a {
      color: #006598;
      text-decoration: none;
      font-size: 0.82rem;
      margin: 0 12px;
      transition: color 0.2s ease;
    }

    footer .footer-links a:hover {
      color: #bf5412;
      text-decoration: underline;
    }

    /* ========================================================
       RESPONSIVE
       ======================================================== */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.6rem;
      }

      .header .subtitle {
        font-size: 0.95rem;
      }

      .tab-btn {
        padding: 10px 14px;
        font-size: 0.82rem;
      }

      .metric-card {
        flex: 1 1 130px;
      }

      .metric-card .metric-value {
        font-size: 1.4rem;
      }

      .model-card {
        flex: 1 1 100%;
      }

      .flow-diagram {
        flex-direction: column;
        align-items: center;
      }

      .flow-arrow {
        transform: rotate(90deg);
        padding: 4px 0;
      }

      .bar-chart .bar-label {
        width: 120px;
        font-size: 0.78rem;
      }

      .nav-bar {
        flex-direction: column;
        height: auto;
        padding: 8px 16px;
        gap: 4px;
      }

      .nav-bar .nav-links {
        flex-wrap: wrap;
        justify-content: center;
      }

      .container {
        padding: 0 16px;
      }
    }

    /* ========================================================
       PRINT STYLES
       ======================================================== */
    @media print {
      .nav-bar {
        display: none;
      }

      .tab-nav {
        display: none;
      }

      .tab-pane {
        display: block !important;
        page-break-before: always;
        padding: 20px 0;
      }

      .tab-pane:first-child {
        page-break-before: avoid;
      }

      .header {
        background: #006598 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .collapsible-body {
        display: block !important;
      }

      .metric-card {
        box-shadow: none;
        border: 1px solid #cccccc;
      }

      .model-card {
        box-shadow: none;
        border: 1px solid #cccccc;
        page-break-inside: avoid;
      }

      .comparison-table thead th {
        background-color: #006598 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .lift-table thead th {
        background-color: #006598 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      footer {
        page-break-before: always;
      }

      .placeholder {
        border-color: #999999;
        background-color: #f0f0f0;
        color: #666666;
      }

      body {
        font-size: 11pt;
      }

      .container {
        max-width: 100%;
      }
    }

    /* ========================================================
       ACCESSIBILITY
       ======================================================== */
    /* Skip navigation link */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 8px;
      background: #006598;
      color: #ffffff;
      padding: 8px 16px;
      z-index: 10000;
      font-size: 0.9rem;
      border-radius: 0 0 4px 4px;
      text-decoration: none;
    }
    .skip-link:focus {
      top: 0;
    }

    /* Focus indicators */
    .tab-btn:focus-visible,
    .nav-links a:focus-visible,
    .collapsible-header:focus-visible,
    a:focus-visible,
    button:focus-visible {
      outline: 3px solid #bf5412;
      outline-offset: 2px;
    }

    /* Ensure sufficient color contrast for placeholder text */
    .placeholder {
      color: #767676;
    }

    /* Screen-reader-only class */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>

  <a class="skip-link" href="#main-content">Skip to main content</a>

  <!-- ============================================================
       NAV BAR
       ============================================================ -->
  <nav class="nav-bar" aria-label="Site navigation">
    <div class="nav-brand">Mercy and Lucem Clinical Analytics</div>
    <div class="nav-links" role="navigation" aria-label="Page navigation">
      <a href="crc_model_results.html" class="nav-active" aria-current="page">Main Results</a>
      <a href="appendix_a_model_features.html">Appendix A: Model Features</a>
      <a href="appendix_b_feature_catalog.html">Appendix B: Feature Catalog</a>
    </div>
  </nav>

  <!-- ============================================================
       HEADER
       ============================================================ -->
  <header class="header" role="banner">
    <h1>CRC Early Detection Model</h1>
    <p class="subtitle">Colorectal Cancer Risk Prediction &mdash; Preliminary Results</p>
    <p class="header-meta">Clinical Analytics &bull; February 2026</p>
  </header>

  <!-- ============================================================
       TAB NAVIGATION
       ============================================================ -->
  <main id="main-content" class="container">
    <div class="tab-nav" role="tablist" aria-label="Results sections">
      <button class="tab-btn active" role="tab" id="btn-tab0" aria-controls="tab0" aria-selected="true" data-tab="tab0" tabindex="0">Executive Summary</button>
      <button class="tab-btn" role="tab" id="btn-tab1" aria-controls="tab1" aria-selected="false" data-tab="tab1" tabindex="-1">Methodology</button>
      <button class="tab-btn" role="tab" id="btn-tab2" aria-controls="tab2" aria-selected="false" data-tab="tab2" tabindex="-1">Model Variants</button>
      <button class="tab-btn" role="tab" id="btn-tab3" aria-controls="tab3" aria-selected="false" data-tab="tab3" tabindex="-1">Standard Results</button>
      <button class="tab-btn" role="tab" id="btn-tab5" aria-controls="tab5" aria-selected="false" data-tab="tab5" tabindex="-1">All Models</button>
      <button class="tab-btn" role="tab" id="btn-tab6" aria-controls="tab6" aria-selected="false" data-tab="tab6" tabindex="-1">Context &amp; Next Steps</button>
    </div>

    <!-- ============================================================
         TAB PANES
         ============================================================ -->
    <div class="tab-content">


      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 0: Executive Summary
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane active" id="tab0" role="tabpanel" aria-labelledby="btn-tab0" tabindex="0">
        <h2 class="section-header">Executive Summary</h2>

        <p style="font-size: 1.15rem; color: #006598; font-weight: 500; margin-bottom: 28px; line-height: 1.6;">
          Using Mercy&rsquo;s complete clinical data, we built a <strong>gold standard model</strong> that identifies
          patients at elevated risk for colorectal cancer &mdash; before symptoms appear &mdash; using data
          already captured in routine clinical care. This model sets the performance target that portable
          variants will aim to match.
        </p>

        <!-- ── The Stakes ── -->
        <h3>Why This Matters</h3>
        <p>
          Colorectal cancer is the <strong>second leading cause of cancer death</strong> in the United States.
          When caught early, the five-year survival rate is over <strong>90%</strong>. When caught late, it drops
          to <strong>14%</strong>. The difference is almost always whether the patient was screened in time.
        </p>
        <p>
          Many patients are never screened. They miss appointments, fall off care pathways, or simply
          aren't flagged for follow-up. This model finds them by identifying patterns in their existing
          medical records that correlate with undetected colorectal cancer.
        </p>

        <hr class="divider">

        <!-- ── The Headline ── -->
        <h3>The Bottom Line</h3>

        <div style="display: flex; flex-wrap: wrap; gap: 20px; margin: 24px 0;">

          <!-- Headline metric card -->
          <div style="flex: 1 1 100%; background: linear-gradient(135deg, #006598 0%, #004d73 100%); border-radius: 12px; padding: 32px 28px; text-align: center; color: #ffffff;">
            <div style="font-size: 3.2rem; font-weight: 800; letter-spacing: -1px;">21&times;</div>
            <div style="font-size: 1.15rem; font-weight: 500; margin-top: 8px; opacity: 0.95;">
              more CRC cases identified in the highest-risk 1% of patients
            </div>
            <div style="font-size: 0.9rem; margin-top: 12px; opacity: 0.75; line-height: 1.5;">
              If we contact the top 1% of patients flagged by the model for screening,<br>
              we find <strong>21 times more</strong> colorectal cancer cases than contacting patients at random.
            </div>
          </div>

          <!-- Supporting metric cards -->
          <div style="flex: 1 1 200px; background: #f5f7fa; border: 1px solid #e0e7ed; border-radius: 10px; padding: 20px; text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #006598;">28</div>
            <div style="font-size: 0.88rem; color: #555;">Features Selected</div>
            <div style="font-size: 0.78rem; color: #888; margin-top: 4px;">from 425+ engineered</div>
          </div>

          <div style="flex: 1 1 200px; background: #f5f7fa; border: 1px solid #e0e7ed; border-radius: 10px; padding: 20px; text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #006598;">8</div>
            <div style="font-size: 0.88rem; color: #555;">Clinical Categories</div>
            <div style="font-size: 0.78rem; color: #888; margin-top: 4px;">labs, vitals, Dx, meds, &hellip;</div>
          </div>

          <div style="flex: 1 1 200px; background: #f5f7fa; border: 1px solid #e0e7ed; border-radius: 10px; padding: 20px; text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #006598;">858K</div>
            <div style="font-size: 0.88rem; color: #555;">Patient Observations</div>
            <div style="font-size: 0.78rem; color: #888; margin-top: 4px;">2023&ndash;2024 cohort</div>
          </div>



        </div>

        <hr class="divider">

        <!-- ── What makes it work ── -->
        <h3>What Makes This Model Work</h3>

        <p>
          Most published CRC prediction models use a single data source &mdash; typically a Complete Blood
          Count (CBC) lab panel plus age and gender. These models are essentially &ldquo;blood loss detectors&rdquo;:
          they find cancers that cause anemia, but miss the ones that don&rsquo;t.
        </p>
        <p>
          Our model draws from <strong>eight categories of clinical data</strong> that are routinely captured
          in every patient encounter:
        </p>

        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 10px; margin: 20px 0;">
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Labs</strong><br><span style="color:#666; font-size:0.82rem;">Blood work &amp; chemistry</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Vitals</strong><br><span style="color:#666; font-size:0.82rem;">Weight, BP, pulse</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Diagnoses</strong><br><span style="color:#666; font-size:0.82rem;">ICD-10 conditions</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Outpatient Meds</strong><br><span style="color:#666; font-size:0.82rem;">Prescription patterns</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Inpatient Meds</strong><br><span style="color:#666; font-size:0.82rem;">Hospital medications</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Visit History</strong><br><span style="color:#666; font-size:0.82rem;">Appointments &amp; no-shows</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Procedures</strong><br><span style="color:#666; font-size:0.82rem;">Imaging, transfusions</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Demographics</strong><br><span style="color:#666; font-size:0.82rem;">Age, gender</span></div>
        </div>

        <p>
          This breadth matters because colorectal cancer doesn&rsquo;t always announce itself through blood
          loss. Some patients show up through <strong>unexplained weight loss</strong>. Others through
          <strong>changes in visit patterns</strong> &mdash; more ER trips, missed follow-ups, GI symptoms
          without specialist referral. By looking across all eight categories, the model captures
          multiple pathways to the same disease.
        </p>

        <hr class="divider">

        <!-- ── How we know it's real ── -->
        <h3>How We Know the Signal Is Real</h3>

        <p>
          With nearly 858,000 observations, there is a real risk of finding patterns that look
          predictive but are actually noise. We addressed this with a rigorous, multi-stage
          selection process designed to ensure every feature earns its place:
        </p>

        <ol style="margin: 20px 0; padding-left: 0; list-style: none; counter-reset: rigor;">
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">1</span>
            <strong>425+ features engineered</strong> from raw clinical data across 7 specialized pipelines.
            We didn&rsquo;t just use what was obvious &mdash; we created acceleration measures, variability
            scores, composite risk indicators, and care pattern metrics.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">2</span>
            <strong>Statistical reduction to 165</strong> using effect size (risk ratios) and information content
            (mutual information) &mdash; not p-values, which are meaningless at this sample size.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">3</span>
            <strong>Correlation clustering</strong> grouped related features and removed redundancy,
            reducing to 139 while preserving the best representative from each group.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">4</span>
            <strong>28 rounds of iterative winnowing</strong> &mdash; at each round, the model was retrained
            and features that contributed little were identified through multiple independent criteria.
            No single metric could eliminate a feature on its own.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">5</span>
            <strong>Cross-validation stability</strong> &mdash; all 28 final features were confirmed as
            important across 5 independent data splits. None survived by luck.
          </li>
        </ol>

        <div class="callout callout-info">
          <p>
            <strong>The result:</strong> 425+ candidate features reduced to 28 that are statistically robust,
            clinically interpretable, and independently validated. Every one of these features has a
            plain-English explanation that a clinician can review and understand.
          </p>
        </div>

        <hr class="divider">

        <!-- ── What a high score means ── -->
        <h3>What a High Risk Score Means in Practice</h3>

        <p>
          When the model assigns a high risk score to a patient, it&rsquo;s not a diagnosis. It&rsquo;s a
          recommendation to prioritize that patient for screening. The score is based on patterns like:
        </p>

        <ul style="margin: 16px 0 20px 20px;">
          <li><strong>Blood pressure variability</strong> that has increased over recent months</li>
          <li><strong>Unexplained weight loss</strong> or declining weight trajectory</li>
          <li>A <strong>high-risk medical history</strong> (prior polyps, family history, inflammatory bowel disease)</li>
          <li><strong>Declining albumin</strong> or other lab markers suggesting systemic illness</li>
          <li>Patterns of <strong>GI-related visits without specialist follow-up</strong></li>
          <li><strong>Iron deficiency</strong> with or without diagnosed anemia</li>
        </ul>

        <p>
          The model produces a <strong>risk flag</strong> identifying patients in the highest-risk group
          for targeted screening outreach. The care team can then apply clinical judgment to determine
          appropriate next steps for each flagged patient.
        </p>

        <hr class="divider">

        <!-- ── Quick comparison ── -->
        <h3>How This Compares</h3>

        <div class="table-wrapper">
          <table class="comparison-table" style="border-left: 4px solid #006598;">
            <thead>
              <tr>
                <th scope="col">Dimension</th>
                <th scope="col">Vendor Models (e.g., ColonFlag)</th>
                <th scope="col">Our Model</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="row-label">Data Used</td>
                <td>Blood tests + age + gender<br><span style="font-size:0.82rem; color:#888;">(~8&ndash;10 features)</span></td>
                <td><strong>8 clinical categories</strong><br><span style="font-size:0.82rem; color:#888;">(28 features from vitals, diagnoses, visits, labs, demographics)</span></td>
              </tr>
              <tr>
                <td class="row-label">Trained On</td>
                <td>Israeli or Kaiser Permanente patients</td>
                <td><strong>Mercy and Lucem patients</strong></td>
              </tr>
              <tr>
                <td class="row-label">Ongoing Cost</td>
                <td>Per-patient licensing fees</td>
                <td><strong>Internal maintenance</strong></td>
              </tr>
              <tr>
                <td class="row-label">Screening Efficiency</td>
                <td>Reported as odds ratios, not lift</td>
                <td><strong>21&times; lift</strong> at top 1%</td>
              </tr>
            </tbody>
          </table>
        </div>

        <hr class="divider">

        <!-- ── Next Steps ── -->
        <h3>What Happens Next</h3>
        <p>
          The Mercy Full Data model is our <strong>gold standard</strong> &mdash; the best performance achievable
          with complete Mercy data. The next step is building a portable model that Lucem can deploy
          in their own environment.
        </p>

        <ol style="margin: 12px 0 20px 20px;">
          <li style="margin-bottom:8px;"><strong>Lucem reviews the feature catalog</strong> (<a href="appendix_b_feature_catalog.html" style="color:#006598;">Appendix B</a>) and identifies which features are universally available in their EHR</li>
          <li style="margin-bottom:8px;"><strong>We run feature selection</strong> on the identified feature subset using the same automated pipeline that produced these results</li>
          <li style="margin-bottom:8px;"><strong>Hyperparameter tuning</strong> (Optuna) and <strong>isotonic calibration followed by quantile transformation</strong> to produce a 0&ndash;100 risk score</li>
          <li style="margin-bottom:8px;"><strong>Model replication in Vertex AI</strong> on Google Cloud Platform for production deployment</li>
        </ol>

        <p style="font-size:0.88rem; color:#888; margin-top:16px;">
          <em>Results shown are from the Mercy Full Data gold standard model. The FHIR Portable variant tests cross-hospital portability using only high-availability FHIR features.</em>
        </p>

      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 1: Methodology Overview
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab1" role="tabpanel" aria-labelledby="btn-tab1" tabindex="0" hidden>
        <h2 class="section-header">Methodology Overview</h2>

        <!-- Opening Statement -->
        <p style="font-size: 1.1rem; color: #006598; font-weight: 500; margin-bottom: 24px;">
          Advancing Mercy and Lucem's commitment to Excellence and Stewardship through data-driven early detection of colorectal cancer.
        </p>

        <!-- The Challenge -->
        <h3>The Challenge</h3>
        <p>
          Colorectal cancer (CRC) is the <strong>second leading cause of cancer death</strong> in the United States.
          When caught early, the five-year survival rate is over 90%. When caught late, that number drops to just 14%.
          The difference between early and late detection is often the difference between life and death.
        </p>
        <p>
          Yet many patients are never screened. They fall through the cracks &mdash; no colonoscopy scheduled,
          no follow-up after a missed appointment, no flag in the system. These are the patients we built this model to find.
        </p>
        <p>
          Using <strong>858,000+ patient observations</strong> from Mercy&rsquo;s electronic health records, we developed a
          gold standard model that identifies high-risk unscreened patients based on their existing clinical data &mdash;
          labs, vitals, diagnoses, medications, procedures, and visit patterns. This gold standard establishes the
          performance target; we then test how close we can get using only the data available for portable deployment
          across health systems.
        </p>

        <hr class="divider">

        <!-- Pipeline Overview Flow Diagram -->
        <h3>How We Built It: The Pipeline</h3>
        <p>
          Building a reliable prediction model is not a single step &mdash; it is a careful, multi-stage process.
          We started with eight categories of clinical data, engineered over 400 candidate features, used statistical
          methods to identify the 165 most informative, and then systematically winnowed to the signals that matter most.
        </p>

        <div class="flow-diagram">
          <div class="flow-step">
            8 Clinical<br>Categories
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            7 Books<br>Engineer<br><span class="flow-count">~425</span><br>Features
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Statistical<br>Reduction<br><span style="font-size:0.75rem; color:#bf5412;">(Risk Ratios + MI)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            165 Candidate<br>Features
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Hierarchical<br>Clustering
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Iterative<br>Winnowing<br><span class="flow-count">28 rounds</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Cross-Validation<br>Stability
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Parsimony<br>Selection
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            28 Final<br>Features
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            Production<br>Model
          </div>
        </div>

        <p class="text-muted" style="text-align: center; margin-top: -8px;">
          Each arrow represents a data-driven decision point. No features are removed arbitrarily.
        </p>

        <hr class="divider">

        <!-- Key Numbers Callout Cards -->
        <h3>By the Numbers</h3>
        <div class="metric-cards">
          <div class="metric-card">
            <div class="metric-value">858,000+</div>
            <div class="metric-label">Patient Observations</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">~425</div>
            <div class="metric-label">Features Engineered</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">165</div>
            <div class="metric-label">Statistical Survivors</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">7</div>
            <div class="metric-label">Feature Engineering Books</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">28</div>
            <div class="metric-label">Iterative Winnowing Rounds</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">28</div>
            <div class="metric-label">Final Features Selected</div>
          </div>
        </div>

        <hr class="divider">

        <!-- From Raw Data to Candidate Features -->
        <h3>From Raw Data to Candidate Features</h3>
        <p>
          The 165 candidate features that enter the winnowing process are themselves the output of an earlier
          reduction. Seven dedicated notebooks (Books 0&ndash;7) each extract and engineer features from a
          single clinical data source, producing <strong>over 425 features in total</strong>. Each book then
          applies statistical screening &mdash; risk ratio analysis and mutual information scoring &mdash;
          to identify which engineered features carry genuine predictive signal for CRC, discarding
          those that are redundant, noisy, or clinically irrelevant. An eighth book (Book 8) compiles the
          survivors into a single wide table.
        </p>

        <!-- Single Book Schematic -->
        <h4>How a Single Book Works: Laboratory Results (Book 4)</h4>
        <p>
          Each of the seven feature engineering books follows the same disciplined process. Here is
          Book 4 (Labs) as a representative example:
        </p>

        <div class="flow-diagram">
          <div class="flow-step">
            Raw Lab<br>Results<br><span style="font-size:0.72rem; color:#888;">(15 test types)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Feature<br>Engineering<br><span class="flow-count">93 features</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Risk Ratio<br>Screening<br><span style="font-size:0.72rem; color:#888;">(effect size)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Mutual Info<br>Scoring<br><span style="font-size:0.72rem; color:#888;">(non-linear signal)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            25 Survivors<br><span style="font-size:0.72rem; color:rgba(255,255,255,0.8);">(73% reduction)</span>
          </div>
        </div>

        <p style="font-size:0.92rem; color:#555;">
          From 15 raw lab test types, Book 4 engineers 93 features &mdash; latest values, velocities (rate of change),
          accelerations (change in rate of change), composite flags (like &ldquo;comprehensive iron deficiency&rdquo;),
          and interaction terms. Statistical screening then identifies the 25 that carry the most information about
          future CRC risk, eliminating redundant time windows (e.g., keeping 6-month change but not also 12-month),
          low-prevalence markers, and features that duplicate signal already captured elsewhere.
        </p>

        <!-- Per-Book Breakdown (collapsible) -->
        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>Per-Book Feature Counts: All Seven Feature Engineering Books</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <div class="table-wrapper">
              <table class="comparison-table">
                <thead>
                  <tr>
                    <th scope="col">Book</th>
                    <th scope="col">Domain</th>
                    <th scope="col">Engineered</th>
                    <th scope="col">Survived</th>
                    <th scope="col">Reduction</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="row-label">Book 0</td>
                    <td>Demographics</td>
                    <td>13</td>
                    <td>11</td>
                    <td>15%</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 1</td>
                    <td>Vitals</td>
                    <td>~70</td>
                    <td>24</td>
                    <td>66%</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 2</td>
                    <td>ICD-10 Diagnoses</td>
                    <td>116</td>
                    <td>26</td>
                    <td>78%</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 3</td>
                    <td>Social Factors</td>
                    <td>~30</td>
                    <td>0</td>
                    <td style="color:#bf5412; font-weight:600;">100% &mdash; excluded</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 4</td>
                    <td>Laboratory Results</td>
                    <td>93</td>
                    <td>25</td>
                    <td>73%</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 5.1</td>
                    <td>Outpatient Medications</td>
                    <td>48</td>
                    <td>19</td>
                    <td>60%</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 5.2</td>
                    <td>Inpatient Medications</td>
                    <td>48</td>
                    <td>20</td>
                    <td>58%</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 6</td>
                    <td>Visit History</td>
                    <td>41</td>
                    <td>24</td>
                    <td>41%</td>
                  </tr>
                  <tr>
                    <td class="row-label">Book 7</td>
                    <td>Procedures</td>
                    <td>33</td>
                    <td>17</td>
                    <td>49%</td>
                  </tr>
                  <tr style="background-color:#f0f6fa; font-weight:600;">
                    <td class="row-label">Total</td>
                    <td></td>
                    <td>~425</td>
                    <td>165</td>
                    <td>61%</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p style="font-size:0.88rem; color:#555; margin-top:12px;">
              <strong>Book 3 (Social Factors)</strong> was fully excluded due to data quality issues &mdash; 78% of
              patients had default &ldquo;never smoker&rdquo; status due to Epic workflow artifacts, producing
              inverted risk relationships. All ~30 social features were removed before compilation.
              <strong>Book 8</strong> compiles survivors from Books 0&ndash;7 and applies final exclusions
              (CEA, CA19-9, FOBT for circular reasoning; <code>months_since_cohort_entry</code> for prevalence bias).
            </p>
          </div>
        </div>

        <!-- Value of Statistical Screening Callout -->
        <div class="callout callout-success">
          <p class="callout-title">Why Statistical Screening Matters: Surfacing What Intuition Misses</p>
          <p>
            This automated, data-driven process does more than filter noise &mdash; it surfaces features that
            clinical intuition alone might overlook. A clinician reviewing a patient chart would notice an
            abnormally low hemoglobin value. But the statistical screening identified that
            <strong>hemoglobin&rsquo;s accelerating decline</strong> &mdash; a second-derivative trend computed
            from serial lab draws &mdash; is the single strongest lab predictor, carrying
            <strong>10.9x elevated CRC risk</strong>. That&rsquo;s not a value on a lab report; it&rsquo;s a
            mathematical pattern across visits that no human reviewer would calculate.
          </p>
          <p>
            Similarly, features like <strong>systolic blood pressure variability over 6 months</strong> &mdash;
            the #1 feature in both models by SHAP importance &mdash; emerge
            from the statistical process: patterns that exist in the data but would never appear on a
            clinical problem list. The combination of domain-driven feature engineering (what to measure)
            with statistical screening (what matters) is what gives this pipeline its power.
          </p>
        </div>

        <hr class="divider">

        <!-- Feature Categories Table -->
        <h3>What Data Goes In: Eight Clinical Categories</h3>
        <p>
          Every feature in the model traces back to real clinical data already captured in Mercy and Lucem's EHR.
          We organized the raw data into eight categories, then engineered predictive signals from each.
          The table below shows the final 165 survivors that enter the winnowing process.
        </p>

        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th scope="col">Category</th>
                <th scope="col">Source</th>
                <th scope="col">Features</th>
                <th scope="col">Examples</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="row-label">Demographics</td>
                <td>Patient records</td>
                <td>11</td>
                <td>Age, gender, race, marital status, PCP status</td>
              </tr>
              <tr>
                <td class="row-label">Vitals</td>
                <td>Clinical measurements</td>
                <td>24</td>
                <td>BMI, blood pressure, weight changes, temperature</td>
              </tr>
              <tr>
                <td class="row-label">ICD-10 Diagnoses</td>
                <td>Diagnosis codes</td>
                <td>26</td>
                <td>GI symptoms, anemia, comorbidity scores</td>
              </tr>
              <tr>
                <td class="row-label">Laboratory Results</td>
                <td>Lab panels</td>
                <td>25</td>
                <td>CBC, iron studies, liver enzymes, trajectories</td>
              </tr>
              <tr>
                <td class="row-label">Outpatient Medications</td>
                <td>Pharmacy records</td>
                <td>19</td>
                <td>GI medications, pain management, supplements</td>
              </tr>
              <tr>
                <td class="row-label">Inpatient Medications</td>
                <td>Hospital records</td>
                <td>20</td>
                <td>IV iron, PPIs, clinical syndrome composites</td>
              </tr>
              <tr>
                <td class="row-label">Visit History</td>
                <td>Appointment records</td>
                <td>24</td>
                <td>Visit frequency, no-show patterns, specialty visits</td>
              </tr>
              <tr>
                <td class="row-label">Procedures</td>
                <td>Clinical procedures</td>
                <td>17</td>
                <td>Imaging, transfusions, iron infusions, endoscopies</td>
              </tr>
              <tr style="background-color:#f0f6fa; font-weight:600;">
                <td class="row-label">Total</td>
                <td></td>
                <td>165</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>

        <hr class="divider">

        <!-- Methodology Rigor Callout -->
        <h3>Built for Trust: Our Safeguards</h3>
        <div class="callout callout-info">
          <p class="callout-title">Why This Methodology Is Conservative by Design</p>
          <p>
            In a dataset with a 0.36% positive rate &mdash; 1 CRC case for every 277 patient observations &mdash;
            an aggressive model could easily latch onto noise rather than genuine clinical signal.
            Every design choice prioritizes stability and reliability over raw performance.
          </p>
          <ul>
            <li>
              <strong>Ultra-conservative model parameters</strong> prevent overfitting. The model uses very shallow
              decision trees and heavy regularization, learning slowly and deliberately.
            </li>
            <li>
              <strong>Multi-criteria removal:</strong> A feature is only removed if it fails at least two of three
              independent tests &mdash; near-zero contribution, negative-biased signal, and bottom ranking.
              No feature is dropped based on a single metric.
            </li>
            <li>
              <strong>Cluster protection rules</strong> ensure that at least one representative from each group
              of correlated features is always preserved. The model never loses an entire category of signal.
            </li>
            <li>
              <strong>Roughly 20 winnowing rounds,</strong> each removing only a handful of features at a time.
              This is a cautious, data-driven process &mdash; not aggressive pruning.
            </li>
            <li>
              <strong>5-fold cross-validation</strong> confirms that the selected features are stable
              across different patient subsets &mdash; not an artifact of any single data split.
            </li>
          </ul>
          <p>
            The result is a set of 28 features that have earned their place through repeated,
            independent evaluation &mdash; identifying the most predictive signals (feature selection) while
            guarding against the risk of over-fitting a rare outcome.
          </p>
        </div>

      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 2: Model Variants
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab2" role="tabpanel" aria-labelledby="btn-tab2" tabindex="0" hidden>
        <h2 class="section-header">Model Variants</h2>

        <!-- Why Two Variants? -->
        <h3>Why Two Variants?</h3>
        <p>
          We built a <strong>gold standard model</strong> using every clinical data category
          available in Mercy&rsquo;s EHR. This establishes the ceiling &mdash; the best performance
          achievable with complete data. We then built a <strong>FHIR Portable</strong> variant
          using only features available in standard US hospital FHIR R4 implementations. This
          measures the cost of maximum cross-hospital portability &mdash; no custom integrations,
          no medication mapping, no visit/scheduling data.
        </p>

        <hr class="divider">

        <!-- Three Model Cards -->
        <h3>Two Models, Two Questions</h3>
        <div class="model-cards">

          <!-- Card 1: Full Data (Gold Standard) -->
          <div class="model-card" style="border: 2px solid #006598;">
            <span class="model-tag tag-full">Gold Standard</span>
            <h3>Mercy Full Data</h3>
            <p style="font-weight:600; color:#333; margin-bottom:12px;">All 8 Clinical Categories</p>
            <ul style="font-size:0.92rem; color:#555; padding-left:18px; margin-bottom:16px;">
              <li style="margin-bottom:8px;">
                ~425 engineered features statistically reduced to 165 candidates from demographics,
                vitals, diagnoses, labs, medications, visits, and procedures
              </li>
              <li style="margin-bottom:8px;">
                Our most comprehensive model &mdash; leverages every available clinical
                signal from Mercy&rsquo;s EHR
              </li>
              <li style="margin-bottom:8px;">
                <strong>Sets the performance target</strong> that portable variants will aim to match
              </li>
            </ul>
            <p style="font-size:0.82rem; color:#006598; font-style:italic; border-top:1px solid #e0e7ed; padding-top:10px; margin-bottom:0;">
              The gold standard &mdash; what&rsquo;s possible with complete data
            </p>
          </div>

          <!-- Card 2: FHIR Portable (Experiment) -->
          <div class="model-card">
            <span class="model-tag tag-fhir">Experiment</span>
            <h3>FHIR Portable</h3>
            <p style="font-weight:600; color:#333; margin-bottom:12px;">Standard FHIR Resources Only</p>
            <ul style="font-size:0.92rem; color:#555; padding-left:18px; margin-bottom:16px;">
              <li style="margin-bottom:8px;">
                Uses only features available in standard US hospital FHIR R4 implementations
                (US Core profiles)
              </li>
              <li style="margin-bottom:8px;">
                <strong>Excludes:</strong> All medications (requires RxNorm mapping), visit history
                (scheduling data), inpatient MAR, specialty labs (CRP, ESR, CA-125)
              </li>
              <li style="margin-bottom:8px;">
                <strong>Motivated by cross-hospital portability:</strong> Works with any Cures Act&ndash;compliant
                EHR without custom integrations
              </li>
            </ul>
            <p style="font-size:0.82rem; color:#6f42c1; font-style:italic; border-top:1px solid #e0e7ed; padding-top:10px; margin-bottom:0;">
              Experiment &mdash; maximum portability baseline
            </p>
          </div>

        </div><!-- end .model-cards -->

        <hr class="divider">

        <!-- Feature Count Comparison (CSS Bar Chart) -->
        <h3>Feature Count Comparison</h3>
        <p>
          Each variant starts with a different number of candidate features, depending on which
          data categories are included. The 5-phase pipeline then winnows each set down to the
          most predictive signals.
        </p>

        <h4 style="color:#555; font-size:0.95rem; margin-top:24px; margin-bottom:12px;">Starting Features (Candidate Pool)</h4>
        <div class="bar-chart">
          <div class="bar-row">
            <div class="bar-label">Full Data</div>
            <div class="bar-track">
              <div class="bar-fill fill-primary" style="width:100%;">~425 engineered &rarr; 165 candidates</div>
            </div>
          </div>
          <div class="bar-row">
            <div class="bar-label">FHIR Portable</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:70%; background: linear-gradient(90deg, #6f42c1, #9d7bd8);">~425 engineered &rarr; 116 candidates</div>
            </div>
          </div>
        </div>

        <h4 style="color:#555; font-size:0.95rem; margin-top:24px; margin-bottom:12px;">Final Features (After Winnowing)</h4>
        <div class="bar-chart">
          <div class="bar-row">
            <div class="bar-label">Full Data</div>
            <div class="bar-track">
              <div class="bar-fill fill-primary" style="width:50%;">28 features</div>
            </div>
          </div>
          <div class="bar-row">
            <div class="bar-label">FHIR Portable</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:57%; background: linear-gradient(90deg, #6f42c1, #9d7bd8);">32 features</div>
            </div>
          </div>
        </div>

        <hr class="divider">

        <!-- Key Insight Callout -->
        <div class="callout callout-success">
          <p class="callout-title">Independent Optimization</p>
          <p>
            Each experimental variant is built from scratch through the complete 5-phase pipeline &mdash;
            not pruned from the gold standard. This ensures each experiment is independently optimized
            for its available data. The feature selection process discovers the best signals
            within each data scope, giving us a true measure of what each data category contributes.
          </p>
        </div>

      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 3: Standard Model Results
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab3" role="tabpanel" aria-labelledby="btn-tab3" tabindex="0" hidden>
        <h2 class="section-header">Standard Model Results</h2>

        <p>
          Results from the two model variants. The Full Data column is the <strong>gold standard</strong>;
          the FHIR Portable column measures cross-hospital portability using only standard FHIR features.
          All metrics are computed on the held-out test set &mdash; patients the model
          never saw during training or feature selection.
        </p>

        <!-- Held-Out Test Set Explanation -->
        <div class="callout callout-info">
          <p class="callout-title">Why &ldquo;Held-Out&rdquo; Matters</p>
          <p>
            Before any modeling began, we set aside 15% of patients as a test set.
            These patients were never used during training or feature selection.
            Metrics on the test set represent how the model would perform on truly new
            patients &mdash; the closest approximation to real-world deployment we can
            get without actually deploying.
          </p>
        </div>

        <hr class="divider">

        <!-- Metric Explanation Cards -->
        <h3>Understanding the Metrics</h3>
        <div class="metric-cards">
          <div class="metric-card" style="border-top: 3px solid #bf5412;">
            <div class="metric-value" style="color:#bf5412;">Lift</div>
            <div class="metric-label">Primary Metric</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">AUPRC</div>
            <div class="metric-label">Precision-Recall</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" style="color:#888;">AUROC</div>
            <div class="metric-label">Reported for Context</div>
          </div>
        </div>

        <div style="margin-top: 16px;">
          <p>
            <strong style="color:#bf5412;">Lift (Screening Efficiency)</strong> &mdash;
            The most operationally meaningful metric for this model. Lift answers the question clinicians
            actually care about: <em>&ldquo;If we prioritize the top N% of patients by risk score for screening outreach,
            how many more CRC cases will we find compared to reaching out at random?&rdquo;</em>
          </p>
          <p>
            A lift of 21&times; at the top 1% means the highest-risk 1% of patients contains 21 times more CRC cases
            than a random 1% sample. This translates directly to <strong>screening program efficiency</strong> &mdash;
            the same outreach budget reaches far more patients who actually need colonoscopies. We report lift
            at multiple thresholds (top 1%, 5%, 10%) because the operational question is &ldquo;how many patients
            can we contact?&rdquo; &mdash; and the answer determines which threshold to use.
          </p>

          <p>
            <strong>AUPRC (Area Under Precision-Recall Curve)</strong> &mdash;
            Summarizes model quality across all decision thresholds. At our 0.36% prevalence,
            a random classifier scores 0.004. Published ML models on rare clinical events
            typically achieve 0.05&ndash;0.10, representing a 12&ndash;25&times; improvement over random. AUPRC was
            used to guide model selection during training because it correctly penalizes false positives
            in highly imbalanced settings.
          </p>

          <div class="callout callout-warning" style="margin-top:16px; margin-bottom:16px;">
            <p class="callout-title">Why AUROC Is Misleading at 277:1 Class Imbalance</p>
            <p>
              <strong>AUROC</strong> measures the model&rsquo;s ability to rank positives above negatives, but at extreme
              class imbalance it becomes dangerously uninformative. Here is why:
            </p>
            <ul>
              <li>
                A model that <strong>correctly rejects 99.6% of negatives but finds zero CRC cases</strong> still
                achieves a decent AUROC, because the ROC curve&rsquo;s x-axis (false positive rate) is dominated
                by the massive negative class. Correctly ranking a few hundred negatives outweighs missing all positives.
              </li>
              <li>
                At 0.36% prevalence, even a 1% false positive rate means flagging <strong>2,780 healthy patients
                for every 10 true CRC cases</strong>. AUROC cannot distinguish a model that flags 2,780 from one that
                flags 28,000 &mdash; both look similar on the ROC curve.
              </li>
              <li>
                Published CRC models report AUROCs of 0.75&ndash;0.85, but these numbers were computed on populations
                with 5&times; higher prevalence. Our AUROC is <strong>not directly comparable</strong> to theirs.
              </li>
            </ul>
            <p>
              We report AUROC for completeness and comparability with published literature, but it did
              <strong>not</strong> influence any model selection decision. AUPRC and lift are the metrics that
              matter for this problem.
            </p>
          </div>
        </div>

        <hr class="divider">

        <!-- Summary Metrics Table -->
        <h3>Summary Metrics</h3>
        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th scope="col">Metric</th>
                <th scope="col">Full Data</th>
                <th scope="col" style="background:#6f42c1;">FHIR Portable</th>
              </tr>
            </thead>
            <tbody>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 1%</td>
                <td><strong>21.2&times;</strong></td>
                <td><strong>20.1&times;</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 10%</td>
                <td><strong>5.5&times;</strong></td>
                <td><strong>5.1&times;</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ 100%</td>
                <td><strong>1.0&times;</strong></td>
                <td>1.0&times;</td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 1%</td>
                <td><strong>14</strong></td>
                <td><strong>14</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 10%</td>
                <td><strong>52</strong></td>
                <td><strong>56</strong></td>
              </tr>
              <tr>
                <td>Test AUPRC</td>
                <td><strong>0.0534</strong></td>
                <td>0.0401</td>
              </tr>
              <tr>
                <td>Test AUROC</td>
                <td>0.8268</td>
                <td>0.7805</td>
              </tr>
              <tr>
                <td>Final Feature Count</td>
                <td><strong>28</strong></td>
                <td><strong>32</strong></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p style="font-size:0.82rem; color:#666; margin-top:6px;">NNS = Number Needed to Screen &mdash; patients screened to find one CRC case. Random screening baseline: 286 patients per case found.</p>

        <hr class="divider">


      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 5: All Models Comparison
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab5" role="tabpanel" aria-labelledby="btn-tab5" tabindex="0" hidden>
        <h2 class="section-header">All Models Comparison</h2>

        <p>
          Side-by-side comparison of the gold standard model and the FHIR Portable variant.
          The Full Data column is the performance target; the FHIR Portable column measures the cost
          of using only standard FHIR features for maximum cross-hospital portability.
        </p>

        <!-- ── Summary Comparison Table ── -->
        <h3>Summary Metrics</h3>
        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th scope="col">Metric</th>
                <th scope="col">Full Data</th>
                <th scope="col" style="background:#6f42c1;">FHIR Portable</th>
              </tr>
            </thead>
            <tbody>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 1%</td>
                <td><strong>21.2&times;</strong></td>
                <td><strong>20.1&times;</strong></td>
              </tr>

              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 10%</td>
                <td><strong>5.5&times;</strong></td>
                <td><strong>5.1&times;</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ 100%</td>
                <td><strong>1.0&times;</strong></td>
                <td>1.0&times;</td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 1%</td>
                <td><strong>14</strong></td>
                <td><strong>14</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 10%</td>
                <td><strong>52</strong></td>
                <td><strong>56</strong></td>
              </tr>
              <tr>
                <td>Test AUPRC</td>
                <td><strong>0.0534</strong></td>
                <td>0.0401</td>
              </tr>
              <tr>
                <td>Test AUROC</td>
                <td>0.8268</td>
                <td>0.7805</td>
              </tr>
              <tr>
                <td class="row-label">Final Features</td>
                <td><strong>28</strong></td>
                <td><strong>32</strong></td>
              </tr>

            </tbody>
          </table>
        </div>
        <p style="font-size:0.82rem; color:#666; margin-top:6px;">Lift rows highlighted &mdash; these are the primary operational metrics. NNS = Number Needed to Screen (patients screened per cancer found; random baseline = 286). AUROC grayed because it is misleading at 277:1 class imbalance (see Standard Results tab for details). AUPRC guided model selection during training.</p>

        <hr class="divider">

        <!-- ── Cumulative Gains Chart ── -->
        <h3>Cumulative Gains</h3>
        <p style="font-size:0.88rem; color:#555; margin-bottom:16px;">
          How many CRC cases does each model find as you screen increasing portions of the population?
          The steeper the curve above the diagonal, the more efficiently the model concentrates risk at the top.
        </p>
        <div style="text-align:center; margin:20px 0;">
          <svg viewBox="0 0 680 480" style="max-width:620px; width:100%; height:auto; font-family:'Inter','Segoe UI',sans-serif;" role="img" aria-label="Cumulative gains chart comparing Full Data and FHIR Portable models">

            <!-- Chart background -->
            <rect x="75" y="35" width="555" height="370" fill="#fafbfc"/>

            <!-- Horizontal gridlines -->
            <line x1="75" y1="312.5" x2="630" y2="312.5" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="75" y1="220" x2="630" y2="220" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="75" y1="127.5" x2="630" y2="127.5" stroke="#e8e8e8" stroke-width="0.5"/>

            <!-- Vertical gridlines -->
            <line x1="213.75" y1="35" x2="213.75" y2="405" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="352.5" y1="35" x2="352.5" y2="405" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="491.25" y1="35" x2="491.25" y2="405" stroke="#e8e8e8" stroke-width="0.5"/>

            <!-- Reference lines at 1% and 10% screening thresholds -->
            <line x1="80.55" y1="35" x2="80.55" y2="405" stroke="#bf5412" stroke-width="0.8" stroke-dasharray="4,3" opacity="0.5"/>
            <line x1="130.5" y1="35" x2="130.5" y2="405" stroke="#bf5412" stroke-width="0.8" stroke-dasharray="4,3" opacity="0.5"/>

            <!-- Random baseline (diagonal) -->
            <line x1="75" y1="405" x2="630" y2="35" stroke="#aaa" stroke-width="1.5" stroke-dasharray="6,4"/>

            <!-- Full Data curve (blue, solid) -->
            <path d="M 75 405 C 75 365, 78 340, 80.55 326.56 C 88 285, 107 230, 130.5 201.5 C 230 125, 440 55, 630 35"
                  stroke="#006598" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>

            <!-- FHIR Portable curve (purple, dashed) -->
            <path d="M 75 405 C 75 370, 78 345, 80.55 330.63 C 88 295, 107 240, 130.5 216.3 C 230 140, 440 60, 630 35"
                  stroke="#6f42c1" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="10,5"/>

            <!-- Data points &mdash; Full Data (1%, 10%) -->
            <circle cx="80.55" cy="326.56" r="4.5" fill="#006598"/>
            <circle cx="130.5" cy="201.5" r="4.5" fill="#006598"/>

            <!-- Data points &mdash; FHIR Portable (1%, 10%) -->
            <circle cx="80.55" cy="330.63" r="4.5" fill="#6f42c1"/>
            <circle cx="130.5" cy="216.3" r="4.5" fill="#6f42c1"/>

            <!-- Annotation: Top 1% callout -->
            <rect x="108" y="260" width="128" height="56" rx="5" fill="white" stroke="#bf5412" stroke-width="1" opacity="0.95"/>
            <text x="172" y="276" text-anchor="middle" font-size="11" fill="#bf5412" font-weight="700">Top 1%</text>
            <text x="172" y="291" text-anchor="middle" font-size="10">
              <tspan fill="#006598" font-weight="600">21%</tspan>
              <tspan fill="#999"> | </tspan>
              <tspan fill="#6f42c1" font-weight="600">20%</tspan>
              <tspan fill="#666"> of cases</tspan>
            </text>
            <text x="172" y="306" text-anchor="middle" font-size="10">
              <tspan fill="#666">NNS: </tspan>
              <tspan fill="#006598" font-weight="600">14</tspan>
              <tspan fill="#999"> | </tspan>
              <tspan fill="#6f42c1" font-weight="600">14</tspan>
            </text>
            <line x1="80.55" y1="326" x2="108" y2="293" stroke="#bf5412" stroke-width="0.8" stroke-dasharray="3,2" opacity="0.7"/>

            <!-- Annotation: Top 10% callout -->
            <rect x="168" y="148" width="128" height="56" rx="5" fill="white" stroke="#bf5412" stroke-width="1" opacity="0.95"/>
            <text x="232" y="164" text-anchor="middle" font-size="11" fill="#bf5412" font-weight="700">Top 10%</text>
            <text x="232" y="179" text-anchor="middle" font-size="10">
              <tspan fill="#006598" font-weight="600">55%</tspan>
              <tspan fill="#999"> | </tspan>
              <tspan fill="#6f42c1" font-weight="600">51%</tspan>
              <tspan fill="#666"> of cases</tspan>
            </text>
            <text x="232" y="194" text-anchor="middle" font-size="10">
              <tspan fill="#666">NNS: </tspan>
              <tspan fill="#006598" font-weight="600">52</tspan>
              <tspan fill="#999"> | </tspan>
              <tspan fill="#6f42c1" font-weight="600">56</tspan>
            </text>
            <line x1="130.5" y1="209" x2="168" y2="176" stroke="#bf5412" stroke-width="0.8" stroke-dasharray="3,2" opacity="0.7"/>

            <!-- Axes -->
            <line x1="75" y1="405" x2="630" y2="405" stroke="#333" stroke-width="1.5"/>
            <line x1="75" y1="35" x2="75" y2="405" stroke="#333" stroke-width="1.5"/>

            <!-- X-axis labels -->
            <text x="80.55" y="422" text-anchor="middle" font-size="10" fill="#bf5412" font-weight="600">1%</text>
            <text x="130.5" y="422" text-anchor="middle" font-size="10" fill="#bf5412" font-weight="600">10%</text>
            <text x="213.75" y="422" text-anchor="middle" font-size="11" fill="#666">25%</text>
            <text x="352.5" y="422" text-anchor="middle" font-size="11" fill="#666">50%</text>
            <text x="491.25" y="422" text-anchor="middle" font-size="11" fill="#666">75%</text>
            <text x="630" y="422" text-anchor="middle" font-size="11" fill="#666">100%</text>

            <!-- Y-axis labels -->
            <text x="67" y="409" text-anchor="end" font-size="11" fill="#666">0%</text>
            <text x="67" y="316.5" text-anchor="end" font-size="11" fill="#666">25%</text>
            <text x="67" y="224" text-anchor="end" font-size="11" fill="#666">50%</text>
            <text x="67" y="131.5" text-anchor="end" font-size="11" fill="#666">75%</text>
            <text x="67" y="39" text-anchor="end" font-size="11" fill="#666">100%</text>

            <!-- Axis titles -->
            <text x="352" y="452" text-anchor="middle" font-size="12" fill="#333" font-weight="500">% of Population Screened</text>
            <text x="24" y="220" text-anchor="middle" font-size="12" fill="#333" font-weight="500" transform="rotate(-90 24 220)">% of CRC Cases Found</text>

            <!-- Random label -->
            <text x="555" y="108" font-size="10" fill="#999" font-style="italic" transform="rotate(-33 555 108)">Random</text>

            <!-- Legend -->
            <rect x="400" y="360" width="222" height="38" rx="4" fill="white" stroke="#ddd" stroke-width="0.5"/>
            <line x1="410" y1="373" x2="435" y2="373" stroke="#006598" stroke-width="2.5"/>
            <text x="440" y="377" font-size="10" fill="#333">Full Data (28 features)</text>
            <line x1="410" y1="390" x2="435" y2="390" stroke="#6f42c1" stroke-width="2.5" stroke-dasharray="10,5"/>
            <text x="440" y="394" font-size="10" fill="#333">FHIR Portable (32 features)</text>

          </svg>
        </div>
        <p style="font-size:0.82rem; color:#666; margin-top:6px;">Cumulative gains at each screening threshold: percentage of all CRC cases captured when screening the top N% of patients by model risk score. Both models are nearly indistinguishable at operating thresholds (1% and 10%). NNS = patients screened per cancer found (random = 286).</p>

        <hr class="divider">

        <!-- ── Observations ── -->
        <h3>Key Observations</h3>

        <div class="callout callout-info" style="border-left-color:#6f42c1;">
          <p class="callout-title">FHIR Portable Feasibility</p>
          <p>The FHIR Portable model loses 49 features (all medications, all visit history, PCP status, specialty labs) yet delivers <strong>20.1&times; lift at top 1%</strong> vs. the gold standard&rsquo;s 21.2&times; &mdash; a gap of just 5%. In clinical terms: <strong>14 patients screened per cancer found</strong> (vs. 14 for Full Data, vs. 286 for random screening). The model compensates for lost utilization features by recruiting more ICD diagnosis codes (9 vs. 6) and vital sign derivatives (12 vs. 8), producing a more clinically defensible feature set. Notably, the FHIR model&rsquo;s train-validation gap is <strong>half</strong> that of the Full Data model (0.03 vs. 0.07), suggesting better generalizability &mdash; the visit features in Full Data may partially capture institutional patterns rather than pure clinical signal.</p>
        </div>

        <hr class="divider">


      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 6: Context & Next Steps
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab6" role="tabpanel" aria-labelledby="btn-tab6" tabindex="0" hidden>
        <h2 class="section-header">Context &amp; Next Steps</h2>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
             SECTION 1: Our Results in Context
             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <h3 style="margin-top:28px; color:#1a1a1a;">Our Results in Context</h3>

        <p>The results discussed in this section are from the <strong>Mercy Full Data (Standard)</strong> model &mdash; our gold standard trained on all available Mercy data. We will build a portable Lucem model and aim to match this gold standard using the features Lucem identifies as available in their EHR.</p>

        <p>These results represent strong performance on one of the most challenging prediction problems in clinical analytics &mdash; identifying rare cancer events in a general population with noisy outcomes.</p>

        <p>Colorectal cancer prediction in a general, unscreened population is fundamentally different from predicting outcomes in a controlled study or curated registry. Our model must find signal in a population where only 1 in 277 patients will receive a CRC diagnosis within the prediction window, using routinely collected clinical data that was never designed for this purpose.</p>

        <div class="callout callout-success">
          <p class="callout-title">Putting AUPRC in Perspective</p>
          <p>At a prevalence of 0.36%, a model that guesses randomly scores an AUPRC of <strong>0.004</strong>. Published machine learning models on rare clinical events typically achieve AUPRC in the range of 0.05 to 0.10, which is considered strong performance. Our model achieves <strong>0.0534</strong> &mdash; approximately <strong>13&times;</strong> better than random, placing it in the upper range of published models for rare clinical events.</p>
        </div>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
             SECTION 2: Published CRC Model Comparison Table
             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <h3 style="margin-top:36px; color:#1a1a1a;">Published CRC Model Comparison</h3>

        <p>The most widely cited machine-learning CRC prediction model in the published literature is <strong>ColonFlag</strong>, developed by Medial EarlySign (Kfar Malal, Israel) and validated on a Kaiser Permanente Northern California (KPNC) cohort of 308,721 patients. The validation study was published in <em>Clinical Gastroenterology and Hepatology</em> (2020) and funded by Medial Research &mdash; the company that developed the algorithm being evaluated.</p>

        <p>ColonFlag uses an ensemble of decision trees trained on <strong>CBC (Complete Blood Count) parameters only</strong> &mdash; hemoglobin, MCV, RDW, and other red cell indices &mdash; augmented by age and gender. The clinical intuition is sound: CRC often causes slow GI blood loss, which manifests as changes in CBC values before symptoms appear. However, this means ColonFlag is functionally a <em>blood loss detector</em>, not a comprehensive CRC risk model.</p>

        <table class="comparison-table" style="border-left: 4px solid #006598;">
          <thead>
            <tr>
              <th scope="col">Dimension</th>
              <th scope="col">ColonFlag (Schneider et&nbsp;al. 2020)</th>
              <th scope="col">Our Model</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="row-label">Study Design</td>
              <td>Nested case-control within KPNC (retrospective)</td>
              <td>Prospective cohort at Mercy and Lucem</td>
            </tr>
            <tr>
              <td class="row-label">Population</td>
              <td>308,721 (ages 50&ndash;75 with CBC, 1996&ndash;2015)</td>
              <td>858,000+ (ages 45+, unscreened, 2023&ndash;2024)</td>
            </tr>
            <tr>
              <td class="row-label">Outcome Verification</td>
              <td>Kaiser Cancer Registry (&gt;98% capture)</td>
              <td>ICD-10 diagnosis codes with targeted validation</td>
            </tr>
            <tr>
              <td class="row-label">Positive Rate</td>
              <td>1.95% (6,019 CRC cases)</td>
              <td>0.36% (~5.4&times; rarer events)</td>
            </tr>
            <tr>
              <td class="row-label">Feature Scope</td>
              <td>~8&ndash;10 features (CBC + age + gender)</td>
              <td>~425 engineered &rarr; 165 candidates &rarr; 28 final features</td>
            </tr>
            <tr>
              <td class="row-label">Feature Sources</td>
              <td>Single lab panel</td>
              <td>8 clinical categories (labs, vitals, Dx, meds, procedures, visits)</td>
            </tr>
            <tr>
              <td class="row-label">AUROC</td>
              <td>0.78 (95% CI: 0.77&ndash;0.78)</td>
              <td><strong>0.8268</strong></td>
            </tr>
            <tr>
              <td class="row-label">Sensitivity (at 97% specificity)</td>
              <td>35.4% (95% CI: 33.8&ndash;36.7%)</td>
              <td><span class="placeholder">[pending]</span></td>
            </tr>
            <tr>
              <td class="row-label">Key Metric</td>
              <td>OR 17.7&times; (high vs. low score); early-stage OR 13.1&times;</td>
              <td><strong>21&times; lift</strong> at top 1%</td>
            </tr>
            <tr>
              <td class="row-label">Proximal vs. Distal</td>
              <td>Proximal OR 34.7&times; vs. distal OR 12.1&times; (3&times; gap)</td>
              <td><span class="placeholder">[--]</span></td>
            </tr>
            <tr>
              <td class="row-label">Development</td>
              <td>Medial Research (vendor-funded study)</td>
              <td>Internal Mercy and Lucem development</td>
            </tr>
          </tbody>
        </table>

        <p style="font-size:0.85rem; color:#666; margin-top:8px;">Schneider JL et al., &ldquo;Validation of an Algorithm to Identify Patients at Risk for Colorectal Cancer Based on Laboratory Test and Demographic Data in Diverse, Community-Based Population,&rdquo; <em>Clin Gastroenterol Hepatol</em> 2020;18(12):2734&ndash;2741. Study funded by Medial Research.</p>

        <div class="callout callout-info">
          <p class="callout-title">Key Insight from ColonFlag&rsquo;s Validation</p>
          <p>ColonFlag&rsquo;s most revealing finding is its <strong>3&times; performance gap between proximal and distal cancers</strong> (OR 34.7 vs. 12.1). Proximal (right-sided) tumors cause more occult bleeding, which CBC parameters detect well. Distal tumors produce different symptom profiles that a CBC-only model largely misses. Our model&rsquo;s multi-source approach &mdash; incorporating diagnoses, medications, procedures, and visit patterns alongside labs &mdash; is designed to capture both presentations.</p>
        </div>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
             SECTION 3: Why Our Problem Is Harder
             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <h3 style="margin-top:36px; color:#1a1a1a;">Why Our Problem Is Harder</h3>

        <p>Published CRC prediction studies typically use controlled populations with registry-confirmed outcomes. Schneider et al. used Kaiser Permanente&rsquo;s Cancer Registry, which captures over 98% of all CRC diagnoses in their patient population. Their positive rate was 1.95% &mdash; more than <strong>five times higher</strong> than ours.</p>

        <p>This difference is not just a number. It means:</p>

        <ul>
          <li><strong>5&times; fewer positive cases to learn from</strong> per 1,000 patients &mdash; the model has dramatically less signal to work with</li>
          <li><strong>Noisier outcome labels</strong> &mdash; we use ICD-10 codes rather than a cancer registry with &gt;98% capture rate, which means some true positives are missed and some coded cases may be uncertain</li>
          <li><strong>Higher false positive cost</strong> &mdash; at 0.36% prevalence, even a highly specific model will flag many more false positives than true positives</li>
          <li><strong>Contemporary, unscreened population</strong> &mdash; our 2023&ndash;2024 cohort reflects current screening patterns, while Schneider et al. spans 1996&ndash;2015 (a period of evolving screening guidelines)</li>
        </ul>

        <p>We are building a model that works in the messy reality of everyday clinical practice &mdash; not in a curated research dataset with near-perfect outcome labeling and 5&times; the signal density.</p>

        <div class="callout callout-success">
          <p>Despite operating on a harder problem with noisier outcomes and a positive rate 5&times; lower than published benchmarks, our model achieves <strong>21&times; lift at the top 1%</strong> and an AUPRC of 0.0534. This suggests the clinical signals in Mercy and Lucem&rsquo;s data carry genuine predictive value for CRC risk.</p>
        </div>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
             SECTION 4: The Previous Approach: EarlySign LGIFlag
             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <h3 style="margin-top:36px; color:#1a1a1a;">For Context: The Previous Approach Under Consideration</h3>

        <p>Before this project, the approach under consideration was licensing Medial EarlySign&rsquo;s LGIFlag product &mdash; an off-the-shelf vendor model that uses only CBC lab values, age, and gender (approximately 8&ndash;10 features). LGIFlag was trained on 466,107 Israeli patients from Maccabi Healthcare Services and validated on U.S. populations including Kaiser Permanente Northern California and Northwest.</p>

        <p>LGIFlag and ColonFlag share the same fundamental approach (CBC-based ensemble trees by the same company), but LGIFlag is the <em>commercial product</em> while the Schneider study is the independent validation. The key question is whether a model trained on a different population, using a single data source, can outperform a model trained on Mercy and Lucem&rsquo;s own patients using 8 clinical categories.</p>

        <table class="comparison-table" style="border-left: 4px solid #006598;">
          <thead>
            <tr>
              <th scope="col">Dimension</th>
              <th scope="col">EarlySign LGIFlag</th>
              <th scope="col">Our Model</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="row-label">Development</td>
              <td>Off-the-shelf vendor product (black box)</td>
              <td>Built in-house on Mercy data</td>
            </tr>
            <tr>
              <td class="row-label">Training Data</td>
              <td>466,107 Israeli patients (Maccabi Healthcare)</td>
              <td>858,000+ Mercy and Lucem patients</td>
            </tr>
            <tr>
              <td class="row-label">Feature Scope</td>
              <td>CBC labs + age + gender (~8&ndash;10 features)</td>
              <td>8 clinical categories (~425 &rarr; 165 &rarr; 28 features)</td>
            </tr>
            <tr>
              <td class="row-label">Clinical Signal</td>
              <td>Blood loss only (anemia via CBC)</td>
              <td>Blood loss + GI symptoms + medications + procedures + visit patterns</td>
            </tr>
            <tr>
              <td class="row-label">Customization</td>
              <td>None &mdash; same model for all customers</td>
              <td>Trained on Mercy and Lucem&rsquo;s patient population</td>
            </tr>

            <tr>
              <td class="row-label">Ongoing Cost</td>
              <td>Per-patient licensing fees</td>
              <td>Internal maintenance and retraining</td>
            </tr>
            <tr>
              <td class="row-label">Validation</td>
              <td>Validated on KPNC, KPNW, UK THIN</td>
              <td>Validated on held-out Mercy and Lucem patients (same population as training)</td>
            </tr>
          </tbody>
        </table>

        <div class="callout callout-info">
          <p class="callout-title">Why &ldquo;Trained on Our Own Data&rdquo; Matters</p>
          <p>A model trained on Israeli or Kaiser Permanente patients reflects <em>those</em> populations&rsquo; disease patterns, lab reference ranges, and clinical workflows. Mercy and Lucem&rsquo;s patient population spans urban, suburban, and rural communities across four states with different demographics, comorbidity profiles, and care access patterns. A model trained on Mercy and Lucem data inherently captures these local patterns &mdash; including the specific way Mercy clinicians order tests, prescribe medications, and document diagnoses.</p>
        </div>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
             SECTION 5: Scope of Work
             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <h3 style="margin-top:36px; color:#1a1a1a;">What This Project Encompasses</h3>

        <p>This effort represents a comprehensive, ground-up approach to clinical risk prediction:</p>

        <ul style="list-style: none; padding-left: 0; margin: 20px 0;">
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            Cohort creation with stratified patient-level splitting across 858,000+ observations
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            Feature engineering across 8 clinical categories from raw EHR data
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            Over 425 features engineered from raw clinical data, statistically reduced to 165 candidates
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            Hierarchical correlation clustering with data-driven threshold optimization
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            28 iterative winnowing rounds with multi-criteria safeguards per round
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            5-fold cross-validation stability analysis across all feature sets
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            Automated parsimony-aware model selection (Occam&rsquo;s razor applied to ML)
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            6 model variants testing data availability and medication robustness
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            Production model training with SHAP-based feature importance analysis
          </li>
          <li style="padding: 8px 0 8px 28px; position: relative; border-left: 3px solid #006598; margin-bottom: 6px; background: #f9fbfd;">
            <span style="position: absolute; left: 8px; color: #006598; font-weight: bold;">&bull;</span>
            Each of the 6 models built from scratch through the complete pipeline
          </li>
        </ul>

        <p style="font-style: italic; color: #333;">Every model, every feature selection decision, and every validation step is documented and reproducible.</p>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
             SECTION 6: Frequently Asked Questions & Limitations
             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <h3 style="margin-top:36px; color:#1a1a1a;">Frequently Asked Questions</h3>

        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>Why not include colonoscopy as a feature?</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <p>Patients who have completed a colonoscopy are <strong>already excluded from the cohort</strong>. This model targets the unscreened population &mdash; patients who have not yet had a screening colonoscopy. Including colonoscopy as a feature would be circular: the model would learn &ldquo;patients without a colonoscopy are at risk,&rdquo; which is the population definition, not a clinical signal.</p>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>Why exclude CEA, CA19-9, and FOBT/FIT from the lab features?</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <p><strong>CEA</strong> (Carcinoembryonic Antigen) and <strong>CA19-9</strong> are tumor markers ordered almost exclusively when a clinician already suspects cancer. Including them would mean the model detects the doctor&rsquo;s suspicion, not an independent clinical signal. <strong>FOBT/FIT</strong> is itself a CRC screening test &mdash; a positive result <em>is</em> the detection mechanism, not a predictor of future disease.</p>
            <p>We preserved <strong>CA-125</strong> because it is an ovarian cancer marker, not CRC-specific, and is ordered for a wide range of clinical reasons.</p>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>What about social determinants (smoking, alcohol, drug use)?</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <p>All ~30 social determinant features from Book 3 were <strong>excluded due to data quality issues</strong>. In our EHR, 78% of patients have a default &ldquo;never smoker&rdquo; status &mdash; an artifact of Epic workflow design where the default is retained unless actively changed. This produced <em>inverted</em> risk relationships (e.g., &ldquo;never smokers&rdquo; appeared higher-risk because the group included many patients whose status was never assessed). Rather than model documentation artifacts, we excluded the entire social factors category.</p>
            <p>If Mercy and Lucem improves social history data capture in the future, these features could be re-evaluated.</p>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>How does the model handle patients with little or no clinical history?</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <p>The model includes an <span class="feature-code">OBS_MONTHS_PRIOR</span> feature (months of prior observation) and a <span class="feature-code">HAS_FULL_24M_HISTORY</span> flag. Patients with limited history will have mostly zero or null values for clinical features (no labs, no diagnoses, no medications). The model will produce a <strong>lower-confidence prediction</strong> for these patients &mdash; which is appropriate, since there is genuinely less information available.</p>
            <p>In deployment, patients with very sparse data could be flagged separately for clinical review rather than relying solely on the model score.</p>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>Why build 2 model variants instead of just one?</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <p>The two variants answer specific questions about <strong>performance and portability</strong>:</p>
            <ul>
              <li><strong>Full Data</strong> &mdash; what is the best possible performance with all available Mercy clinical data? This is the gold standard.</li>
              <li><strong>FHIR Portable</strong> &mdash; how well can we do using only high-availability FHIR features? This measures the cost of maximum cross-hospital portability.</li>
            </ul>
            <p>Comparing these variants reveals whether the full EHR data significantly outperforms a FHIR-only model. If FHIR Portable performs nearly as well, the model can be deployed across any Cures Act&ndash;compliant hospital without custom integrations.</p>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>Can this model be deployed at another health system?</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <p>The model was trained on Mercy and Lucem data and would need <strong>retraining or validation</strong> before deployment elsewhere. However, the feature engineering pipeline is designed for portability:</p>
            <ul>
              <li>All features map to standard terminologies (ICD-10, LOINC, RxNorm, CPT) &mdash; see <a href="appendix_b_feature_catalog.html" style="color:#006598; font-weight:600;">Appendix B</a></li>
              <li>The FHIR Portable variant uses only standardized features available across all Cures Act&ndash;compliant hospitals</li>

            </ul>
            <p>A partner institution would need to: (1) map their EHR data to the same feature definitions, (2) retrain the model on their population, and (3) validate on held-out data. The feature engineering notebooks and standard code references are designed to make step 1 straightforward.</p>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>Why use AUPRC instead of AUROC as the primary metric?</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <p>At a prevalence of 0.36%, <strong>AUROC is misleadingly optimistic</strong>. A model that correctly classifies 99.6% of negatives achieves a high AUROC even if it misses most positives. AUPRC (Area Under the Precision-Recall Curve) focuses on what actually matters: among the patients the model flags as high-risk, how many truly have CRC (precision), and among all CRC cases, how many does the model find (recall)?</p>
            <p>A random classifier achieves AUPRC of 0.004 at this prevalence (0.36%). Published ML models on rare clinical events typically achieve AUPRC of 0.05&ndash;0.10, which represents a 12&ndash;25&times; improvement over random. We report both metrics, but AUPRC drives our model selection decisions.</p>
          </div>
        </div>

        <h3 style="margin-top:36px; color:#1a1a1a;">Known Limitations</h3>

        <div class="callout callout-warning">
          <p class="callout-title">Important Context for Interpreting Results</p>
          <ul style="margin-bottom:0;">
            <li style="margin-bottom:10px;">
              <strong>Outcome ascertainment:</strong> CRC cases are identified via ICD-10 diagnosis codes, not a cancer registry. Some true cases may be missed (false negatives in the outcome label), and some coded cases may reflect rule-out workups rather than confirmed diagnoses. This adds noise that likely <em>depresses</em> measured performance relative to what the model would achieve with registry-quality labels.
            </li>
            <li style="margin-bottom:10px;">
              <strong>Single health system:</strong> All data comes from Mercy and Lucem&rsquo;s EHR. Clinical workflows, documentation patterns, lab ordering practices, and patient demographics are specific to Mercy and Lucem&rsquo;s service area. External validation would be needed before generalizing results.
            </li>
            <li style="margin-bottom:10px;">
              <strong>Temporal scope:</strong> The cohort spans January 2023 through September 2024. This captures current clinical practice but represents a relatively short observation window. Longer-term validation would strengthen confidence in temporal stability.
            </li>
            <li style="margin-bottom:10px;">
              <strong>Prediction, not causation:</strong> The model identifies statistical associations between clinical features and subsequent CRC diagnosis. It does not establish causal relationships. A high risk score means &ldquo;patients with this clinical profile are more likely to be diagnosed with CRC&rdquo; &mdash; not &ldquo;these features cause CRC.&rdquo;
            </li>
            <li style="margin-bottom:10px;">
              <strong>Not a replacement for screening:</strong> This model is designed to <em>prioritize</em> patients for screening, not to replace colonoscopy or other established screening methods. A low risk score does not mean a patient should skip recommended screening.
            </li>
            <li>
              <strong>Social determinants gap:</strong> Due to EHR data quality issues (see FAQ above), the model does not incorporate smoking, alcohol use, or other social/behavioral risk factors that are clinically relevant to CRC risk.
            </li>
          </ul>
        </div>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
             SECTION 7: Next Steps
             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <h3 style="margin-top:36px; color:#1a1a1a;">Looking Forward</h3>

        <p>The Mercy Full Data model is the <strong>gold standard</strong> &mdash; the best performance achievable with complete data. The FHIR Portable variant quantifies the performance cost of using only standard FHIR features. The question now is: how close can we get to this gold standard using only the features universally available via FHIR?</p>

        <p style="font-weight:600; margin-top:20px; margin-bottom:12px; color:#006598;">Immediate next steps:</p>

        <ol style="list-style: none; padding-left: 0; counter-reset: step-counter; margin: 0 0 24px 0;">
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">1.</span>
            <strong>Lucem reviews the feature catalog</strong> &mdash; <a href="appendix_b_feature_catalog.html" style="color:#006598;">Appendix B</a> lists every feature by clinical category with standard codes (ICD-10, LOINC, CPT). Lucem identifies which features are universally available in their EHR.
          </li>
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">2.</span>
            <strong>Automated feature selection</strong> on the Lucem-available feature subset &mdash; the same 5-phase pipeline (clustering, SHAP winnowing, CV stability, parsimony selection, production training) runs on the constrained feature set.
          </li>
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">3.</span>
            <strong>Hyperparameter tuning and calibration</strong> &mdash; Optuna optimization followed by isotonic calibration and quantile transformation to produce a 0&ndash;100 risk score.
          </li>
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">4.</span>
            <strong>Model replication in Vertex AI</strong> on Google Cloud Platform for production deployment and integration with clinical workflows.
          </li>
        </ol>

        <div class="callout callout-info">
          <p class="callout-title">Action Item for Lucem</p>
          <p>Review the complete feature list in <a href="appendix_b_feature_catalog.html" style="color:#006598; font-weight:600;">Appendix B: Feature Catalog</a> &mdash; particularly the &ldquo;All Features&rdquo; tab at the end, which consolidates all features from every clinical category into a single reference list. For each feature, identify whether the underlying data is available and reliable in Lucem&rsquo;s EHR. This determines the feature set for the portable production model.</p>
        </div>

        <p>Detailed per-model feature lists are in <a href="appendix_a_model_features.html" style="color: #006598; font-weight: 600;">Appendix A: Per-Model Features</a>.</p>

      </div>

    </div><!-- /tab-content -->
  </main><!-- /main content -->

  <!-- ============================================================
       FOOTER
       ============================================================ -->
  <footer role="contentinfo">
    <p>Generated for Mercy and Lucem Clinical Analytics | February 2026</p>
    <p class="tagline">&ldquo;Your life is our life&rsquo;s work&rdquo;</p>
    <div class="footer-links">
      <a href="appendix_a_model_features.html">Appendix A: Model Features</a>
      <a href="appendix_b_feature_catalog.html">Appendix B: Feature Catalog</a>
    </div>
  </footer>

  <!-- ============================================================
       JAVASCRIPT
       ============================================================ -->
  <script>
    (function() {
      'use strict';

      /* ----------------------------------------------------------
         TAB SWITCHING (with ARIA support)
         ---------------------------------------------------------- */
      var tabButtons = document.querySelectorAll('.tab-btn');
      var tabPanes   = document.querySelectorAll('.tab-pane');

      function switchTab(targetId, focusPanel) {
        // Deactivate all buttons and hide all panes
        tabButtons.forEach(function(btn) {
          btn.classList.remove('active');
          btn.setAttribute('aria-selected', 'false');
          btn.setAttribute('tabindex', '-1');
        });
        tabPanes.forEach(function(pane) {
          pane.classList.remove('active');
          pane.setAttribute('hidden', '');
        });
        // Activate the target button and pane
        var targetBtn = document.querySelector('.tab-btn[data-tab="' + targetId + '"]');
        var targetPane = document.getElementById(targetId);
        if (targetBtn) {
          targetBtn.classList.add('active');
          targetBtn.setAttribute('aria-selected', 'true');
          targetBtn.setAttribute('tabindex', '0');
        }
        if (targetPane) {
          targetPane.classList.add('active');
          targetPane.removeAttribute('hidden');
          if (focusPanel) targetPane.focus();
        }
      }

      tabButtons.forEach(function(btn) {
        btn.addEventListener('click', function() {
          var tabId = this.getAttribute('data-tab');
          switchTab(tabId);
        });
      });

      /* Keyboard navigation for tabs (arrow keys, Home, End) */
      document.querySelector('.tab-nav').addEventListener('keydown', function(e) {
        var tabs = Array.from(tabButtons);
        var current = tabs.indexOf(document.activeElement);
        if (current < 0) return;

        var next;
        switch (e.key) {
          case 'ArrowRight':
          case 'ArrowDown':
            next = (current + 1) % tabs.length;
            break;
          case 'ArrowLeft':
          case 'ArrowUp':
            next = (current - 1 + tabs.length) % tabs.length;
            break;
          case 'Home':
            next = 0;
            break;
          case 'End':
            next = tabs.length - 1;
            break;
          default:
            return;
        }
        e.preventDefault();
        tabs[next].focus();
        switchTab(tabs[next].getAttribute('data-tab'));
      });

      /* ----------------------------------------------------------
         COLLAPSIBLE SECTIONS (with ARIA and keyboard support)
         ---------------------------------------------------------- */
      function toggleCollapsible(header) {
        var collapsible = header.closest('.collapsible');
        if (!collapsible) return;

        var body = collapsible.querySelector('.collapsible-body');
        var icon = header.querySelector('.collapse-icon');
        var isOpen = body && body.classList.contains('open');

        if (body) body.classList.toggle('open');
        if (icon) icon.classList.toggle('open');
        header.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
      }

      document.addEventListener('click', function(e) {
        var header = e.target.closest('.collapsible-header');
        if (header) toggleCollapsible(header);
      });

      document.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          var header = e.target.closest('.collapsible-header');
          if (header) {
            e.preventDefault();
            toggleCollapsible(header);
          }
        }
      });

      /* ----------------------------------------------------------
         HANDLE TAB LINK FROM URL HASH (cross-file tab linking)
         ---------------------------------------------------------- */
      function handleHash() {
        var hash = window.location.hash;
        if (hash && hash.startsWith('#tab')) {
          var tabId = hash.substring(1);
          switchTab(tabId);
        }
      }

      // Check on load
      handleHash();

      // Check on hash change
      window.addEventListener('hashchange', handleHash);

      /* ----------------------------------------------------------
         INITIALIZE: Ensure first tab is active on page load
         ---------------------------------------------------------- */
      if (!document.querySelector('.tab-pane.active')) {
        switchTab('tab1');
      }

    })();
  </script>

</body>
</html>
