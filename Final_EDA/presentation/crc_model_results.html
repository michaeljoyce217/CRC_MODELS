<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRC Prediction Model Results | Mercy and Lucem Clinical Analytics</title>
  <style>
    /* ========================================================
       RESET & BASE STYLES
       ======================================================== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      scroll-behavior: smooth;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color: #333333;
      background-color: #ffffff;
      line-height: 1.6;
    }

    /* ========================================================
       MERCY BRAND COLOR VARIABLES (used via direct values)
       Primary:    Bahama Blue  #006598
       Accent:     Fiery Orange #bf5412
       Background: White #ffffff / Light Gray #f5f7fa
       Text:       Dark Gray #333333 / Headings #1a1a1a
       ======================================================== */

    /* ========================================================
       NAV BAR
       ======================================================== */
    .nav-bar {
      background-color: #006598;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 48px;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .nav-bar .nav-brand {
      color: #ffffff;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .nav-bar .nav-links {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .nav-bar .nav-links a {
      color: rgba(255, 255, 255, 0.85);
      text-decoration: none;
      font-size: 0.82rem;
      padding: 6px 14px;
      border-radius: 4px;
      transition: background-color 0.2s ease, color 0.2s ease;
      white-space: nowrap;
    }

    .nav-bar .nav-links a:hover {
      background-color: rgba(255, 255, 255, 0.15);
      color: #ffffff;
    }

    .nav-bar .nav-links a.nav-active {
      background-color: rgba(255, 255, 255, 0.2);
      color: #ffffff;
      font-weight: 600;
    }

    /* ========================================================
       HEADER
       ======================================================== */
    .header {
      background: linear-gradient(135deg, #006598 0%, #004d73 100%);
      color: #ffffff;
      padding: 48px 24px 40px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .header .subtitle {
      font-size: 1.1rem;
      font-weight: 300;
      opacity: 0.9;
      margin-bottom: 4px;
    }

    .header .header-meta {
      font-size: 0.85rem;
      opacity: 0.7;
      margin-top: 12px;
    }

    /* ========================================================
       MAIN CONTAINER
       ======================================================== */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* ========================================================
       TAB NAVIGATION
       ======================================================== */
    .tab-nav {
      display: flex;
      gap: 0;
      background-color: #ffffff;
      border-bottom: 3px solid #006598;
      padding: 0;
      margin-top: 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .tab-btn {
      padding: 14px 22px;
      border: none;
      background: transparent;
      color: #555555;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      position: relative;
      transition: color 0.2s ease, background-color 0.2s ease;
      border-bottom: 3px solid transparent;
      margin-bottom: -3px;
    }

    .tab-btn:hover {
      color: #006598;
      background-color: #f0f6fa;
    }

    .tab-btn.active {
      color: #006598;
      font-weight: 600;
      border-bottom-color: #bf5412;
      background-color: #f5f7fa;
    }

    /* ========================================================
       TAB CONTENT / PANES
       ======================================================== */
    .tab-content {
      min-height: 500px;
    }

    .tab-pane {
      display: none;
      padding: 36px 0 48px;
      animation: fadeIn 0.3s ease-in-out;
    }

    .tab-pane.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ========================================================
       SECTION HEADERS
       ======================================================== */
    .section-header {
      color: #006598;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e7ed;
    }

    h2 {
      color: #1a1a1a;
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 16px;
    }

    h3 {
      color: #1a1a1a;
      font-size: 1.15rem;
      font-weight: 600;
      margin-top: 28px;
      margin-bottom: 12px;
    }

    h4 {
      color: #333333;
      font-size: 1rem;
      font-weight: 600;
      margin-top: 20px;
      margin-bottom: 8px;
    }

    p {
      margin-bottom: 14px;
      line-height: 1.65;
    }

    /* ========================================================
       PLACEHOLDER SPANS
       ======================================================== */
    .placeholder {
      display: inline;
      padding: 2px 10px;
      border: 1.5px dashed #bf5412;
      background-color: #fff3e8;
      color: #bf5412;
      border-radius: 3px;
      font-size: 0.88em;
      font-weight: 500;
      font-family: "SF Mono", "Fira Code", "Fira Mono", "Roboto Mono", monospace;
      white-space: nowrap;
    }

    /* ========================================================
       CALLOUT BOXES
       ======================================================== */
    .callout {
      padding: 16px 20px;
      border-radius: 6px;
      margin: 20px 0;
      border-left: 4px solid #006598;
      background-color: #f0f6fa;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    .callout p:last-child {
      margin-bottom: 0;
    }

    .callout-info {
      border-left-color: #006598;
      background-color: #f0f6fa;
    }

    .callout-success {
      border-left-color: #2e7d32;
      background-color: #f1f8e9;
    }

    .callout-warning {
      border-left-color: #bf5412;
      background-color: #fff3e8;
    }

    .callout-title {
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 6px;
      font-size: 0.95rem;
    }

    /* ========================================================
       METRIC CARDS
       ======================================================== */
    .metric-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin: 24px 0;
    }

    .metric-card {
      flex: 1 1 160px;
      background: #ffffff;
      border: 1px solid #e0e7ed;
      border-radius: 8px;
      padding: 20px 16px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      transition: box-shadow 0.2s ease, transform 0.15s ease;
    }

    .metric-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .metric-card .metric-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #006598;
      margin-bottom: 6px;
      line-height: 1.2;
    }

    .metric-card .metric-label {
      font-size: 0.82rem;
      color: #666666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    /* ========================================================
       MODEL CARDS (side-by-side comparison)
       ======================================================== */
    .model-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin: 24px 0;
    }

    .model-card {
      flex: 1 1 300px;
      background: #ffffff;
      border: 1px solid #e0e7ed;
      border-radius: 10px;
      padding: 24px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
      transition: box-shadow 0.2s ease, transform 0.15s ease;
      position: relative;
      overflow: hidden;
    }

    .model-card:hover {
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .model-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #006598, #bf5412);
    }

    .model-card h3 {
      margin-top: 8px;
      color: #006598;
      font-size: 1.1rem;
    }

    .model-card p {
      font-size: 0.92rem;
      color: #555555;
    }

    .model-card .model-tag {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      margin-bottom: 10px;
    }

    .model-card .model-tag.tag-full {
      background-color: #e8f4f8;
      color: #006598;
    }

    .model-card .model-tag.tag-novisit {
      background-color: #fff3e8;
      color: #bf5412;
    }

    .model-card .model-tag.tag-nodemo {
      background-color: #f1f8e9;
      color: #2e7d32;
    }

    .model-card .model-tag.tag-fhir {
      background-color: #f3e8ff;
      color: #6f42c1;
    }

    /* ========================================================
       COMPARISON TABLE
       ======================================================== */
    .table-wrapper {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 1px 6px rgba(0, 0, 0, 0.08);
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      min-width: 500px;
    }

    .comparison-table thead th {
      background-color: #006598;
      color: #ffffff;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 0.85rem;
      letter-spacing: 0.3px;
      white-space: nowrap;
    }

    .comparison-table thead th:first-child {
      border-top-left-radius: 8px;
    }

    .comparison-table thead th:last-child {
      border-top-right-radius: 8px;
    }

    .comparison-table tbody td {
      padding: 10px 16px;
      border-bottom: 1px solid #eaeef2;
      color: #333333;
    }

    .comparison-table tbody tr:nth-child(even) {
      background-color: #f9fafb;
    }

    .comparison-table tbody tr:hover {
      background-color: #f0f6fa;
    }

    .comparison-table tbody tr:last-child td:first-child {
      border-bottom-left-radius: 8px;
    }

    .comparison-table tbody tr:last-child td:last-child {
      border-bottom-right-radius: 8px;
    }

    .comparison-table .row-label {
      font-weight: 600;
      color: #1a1a1a;
      white-space: nowrap;
    }

    /* ========================================================
       LIFT TABLE (quarters x deciles grid)
       ======================================================== */
    .lift-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.82rem;
      min-width: 600px;
    }

    .lift-table thead th {
      background-color: #006598;
      color: #ffffff;
      padding: 8px 12px;
      text-align: center;
      font-weight: 600;
      font-size: 0.78rem;
      letter-spacing: 0.2px;
    }

    .lift-table thead th:first-child {
      text-align: left;
      border-top-left-radius: 6px;
    }

    .lift-table thead th:last-child {
      border-top-right-radius: 6px;
    }

    .lift-table tbody td {
      padding: 7px 12px;
      border-bottom: 1px solid #eaeef2;
      text-align: center;
      color: #333333;
    }

    .lift-table tbody td:first-child {
      text-align: left;
      font-weight: 600;
      color: #1a1a1a;
      white-space: nowrap;
    }

    .lift-table tbody tr:nth-child(even) {
      background-color: #f9fafb;
    }

    .lift-table tbody tr:hover {
      background-color: #f0f6fa;
    }

    /* ========================================================
       COLLAPSIBLE SECTIONS
       ======================================================== */
    .collapsible {
      margin: 20px 0;
      border: 1px solid #e0e7ed;
      border-radius: 8px;
      overflow: hidden;
    }

    .collapsible-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 20px;
      background-color: #f5f7fa;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.2s ease;
    }

    .collapsible-header:hover {
      background-color: #eaeef2;
    }

    .collapsible-header h4 {
      margin: 0;
      font-size: 0.95rem;
      color: #006598;
      font-weight: 600;
    }

    .collapsible-header .collapse-icon {
      font-size: 0.8rem;
      color: #006598;
      transition: transform 0.25s ease;
      font-weight: 700;
    }

    .collapsible-header .collapse-icon.open {
      transform: rotate(180deg);
    }

    .collapsible-body {
      display: none;
      padding: 16px 20px;
      background-color: #ffffff;
    }

    .collapsible-body.open {
      display: block;
    }

    /* ========================================================
       FLOW DIAGRAM (CSS-only pipeline visualization)
       ======================================================== */
    .flow-diagram {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0;
      margin: 28px 0;
      padding: 20px 0;
      justify-content: center;
    }

    .flow-step {
      background: #ffffff;
      border: 2px solid #006598;
      border-radius: 8px;
      padding: 12px 18px;
      text-align: center;
      font-size: 0.82rem;
      font-weight: 500;
      color: #006598;
      min-width: 100px;
      max-width: 160px;
      position: relative;
      box-shadow: 0 2px 6px rgba(0, 101, 152, 0.1);
      transition: box-shadow 0.2s ease, transform 0.15s ease;
    }

    .flow-step:hover {
      box-shadow: 0 4px 12px rgba(0, 101, 152, 0.2);
      transform: translateY(-1px);
    }

    .flow-step.flow-highlight {
      background: #006598;
      color: #ffffff;
      font-weight: 600;
    }

    .flow-step .flow-count {
      display: block;
      font-size: 1.1rem;
      font-weight: 700;
      margin-top: 4px;
    }

    .flow-arrow {
      font-size: 1.3rem;
      color: #bf5412;
      padding: 0 6px;
      font-weight: 700;
      flex-shrink: 0;
    }

    /* ========================================================
       BAR CHART (CSS-only horizontal bars)
       ======================================================== */
    .bar-chart {
      margin: 20px 0;
    }

    .bar-chart .bar-row {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .bar-chart .bar-label {
      width: 200px;
      font-size: 0.85rem;
      font-weight: 500;
      color: #333333;
      text-align: right;
      padding-right: 16px;
      flex-shrink: 0;
    }

    .bar-chart .bar-track {
      flex: 1;
      height: 28px;
      background-color: #eaeef2;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .bar-chart .bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.6s ease;
      display: flex;
      align-items: center;
      padding-left: 10px;
      font-size: 0.78rem;
      font-weight: 600;
      color: #ffffff;
    }

    .bar-chart .bar-fill.fill-primary {
      background: linear-gradient(90deg, #006598, #0080bf);
    }

    .bar-chart .bar-fill.fill-accent {
      background: linear-gradient(90deg, #bf5412, #d96a2b);
    }

    .bar-chart .bar-fill.fill-success {
      background: linear-gradient(90deg, #2e7d32, #43a047);
    }

    /* ========================================================
       MERCY BADGE
       ======================================================== */
    .mercy-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 0.72rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.4px;
      background-color: #e8f4f8;
      color: #006598;
    }

    /* ========================================================
       LISTS
       ======================================================== */
    ul, ol {
      margin-bottom: 14px;
      padding-left: 24px;
    }

    li {
      margin-bottom: 6px;
      line-height: 1.55;
    }

    /* ========================================================
       SECTION BACKGROUNDS
       ======================================================== */
    .section-alt {
      background-color: #f5f7fa;
      padding: 28px 24px;
      border-radius: 8px;
      margin: 24px 0;
    }

    /* ========================================================
       DIVIDER
       ======================================================== */
    .divider {
      border: none;
      border-top: 1px solid #e0e7ed;
      margin: 32px 0;
    }

    /* ========================================================
       STRONG / EMPHASIS UTILITIES
       ======================================================== */
    strong {
      font-weight: 600;
      color: #1a1a1a;
    }

    em {
      color: #555555;
    }

    .text-accent {
      color: #bf5412;
      font-weight: 600;
    }

    .text-primary {
      color: #006598;
      font-weight: 600;
    }

    .text-muted {
      color: #888888;
      font-size: 0.88rem;
    }

    /* ========================================================
       FOOTER
       ======================================================== */
    footer {
      background-color: #f5f7fa;
      border-top: 3px solid #006598;
      padding: 28px 24px;
      text-align: center;
      margin-top: 48px;
    }

    footer p {
      color: #666666;
      font-size: 0.85rem;
      margin-bottom: 4px;
    }

    footer .tagline {
      color: #006598;
      font-style: italic;
      font-size: 0.95rem;
      font-weight: 500;
      margin-top: 8px;
    }

    footer .footer-links {
      margin-top: 12px;
    }

    footer .footer-links a {
      color: #006598;
      text-decoration: none;
      font-size: 0.82rem;
      margin: 0 12px;
      transition: color 0.2s ease;
    }

    footer .footer-links a:hover {
      color: #bf5412;
      text-decoration: underline;
    }

    /* ========================================================
       RESPONSIVE
       ======================================================== */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.6rem;
      }

      .header .subtitle {
        font-size: 0.95rem;
      }

      .tab-btn {
        padding: 10px 14px;
        font-size: 0.82rem;
      }

      .metric-card {
        flex: 1 1 130px;
      }

      .metric-card .metric-value {
        font-size: 1.4rem;
      }

      .model-card {
        flex: 1 1 100%;
      }

      .flow-diagram {
        flex-direction: column;
        align-items: center;
      }

      .flow-arrow {
        transform: rotate(90deg);
        padding: 4px 0;
      }

      .bar-chart .bar-label {
        width: 120px;
        font-size: 0.78rem;
      }

      .nav-bar {
        flex-direction: column;
        height: auto;
        padding: 8px 16px;
        gap: 4px;
      }

      .nav-bar .nav-links {
        flex-wrap: wrap;
        justify-content: center;
      }

      .container {
        padding: 0 16px;
      }
    }

    /* ========================================================
       PRINT STYLES
       ======================================================== */
    @media print {
      .nav-bar {
        display: none;
      }

      .tab-nav {
        display: none;
      }

      .tab-pane {
        display: block !important;
        page-break-before: always;
        padding: 20px 0;
      }

      .tab-pane:first-child {
        page-break-before: avoid;
      }

      .header {
        background: #006598 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .collapsible-body {
        display: block !important;
      }

      .metric-card {
        box-shadow: none;
        border: 1px solid #cccccc;
      }

      .model-card {
        box-shadow: none;
        border: 1px solid #cccccc;
        page-break-inside: avoid;
      }

      .comparison-table thead th {
        background-color: #006598 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .lift-table thead th {
        background-color: #006598 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      footer {
        page-break-before: always;
      }

      .placeholder {
        border-color: #999999;
        background-color: #f0f0f0;
        color: #666666;
      }

      body {
        font-size: 11pt;
      }

      .container {
        max-width: 100%;
      }
    }

    /* ========================================================
       ACCESSIBILITY
       ======================================================== */
    /* Skip navigation link */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 8px;
      background: #006598;
      color: #ffffff;
      padding: 8px 16px;
      z-index: 10000;
      font-size: 0.9rem;
      border-radius: 0 0 4px 4px;
      text-decoration: none;
    }
    .skip-link:focus {
      top: 0;
    }

    /* Focus indicators */
    .tab-btn:focus-visible,
    .nav-links a:focus-visible,
    .collapsible-header:focus-visible,
    a:focus-visible,
    button:focus-visible {
      outline: 3px solid #bf5412;
      outline-offset: 2px;
    }

    /* Ensure sufficient color contrast for placeholder text */
    .placeholder {
      color: #767676;
    }

    /* Screen-reader-only class */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>

  <a class="skip-link" href="#main-content">Skip to main content</a>

  <!-- ============================================================
       NAV BAR
       ============================================================ -->
  <nav class="nav-bar" aria-label="Site navigation">
    <div class="nav-brand">Mercy and Lucem Clinical Analytics</div>
    <div class="nav-links" role="navigation" aria-label="Page navigation">
      <a href="crc_model_results.html" class="nav-active" aria-current="page">Main Results</a>
      <a href="appendix_a_model_features.html">Appendix A: Model Features</a>
      <a href="appendix_b_feature_catalog.html">Appendix B: Feature Catalog</a>
      <a href="appendix_c_technical_context.html">Appendix C: Technical Context</a>
      <a href="appendix_d_cohort_selection.html">Appendix D: Cohort Selection</a>
    </div>
  </nav>

  <!-- ============================================================
       HEADER
       ============================================================ -->
  <header class="header" role="banner">
    <h1>CRC Early Detection Model</h1>
    <p class="subtitle">Colorectal Cancer Risk Prediction &mdash; Preliminary Results</p>
    <p class="header-meta">Clinical Analytics &bull; February 2026</p>
  </header>

  <!-- ============================================================
       TAB NAVIGATION
       ============================================================ -->
  <main id="main-content" class="container">
    <div class="tab-nav" role="tablist" aria-label="Results sections">
      <button class="tab-btn active" role="tab" id="btn-tab0" aria-controls="tab0" aria-selected="true" data-tab="tab0" tabindex="0">Executive Summary</button>
      <button class="tab-btn" role="tab" id="btn-tab1" aria-controls="tab1" aria-selected="false" data-tab="tab1" tabindex="-1">Methodology</button>
      <button class="tab-btn" role="tab" id="btn-tab2" aria-controls="tab2" aria-selected="false" data-tab="tab2" tabindex="-1">Model Variants</button>
      <button class="tab-btn" role="tab" id="btn-tab3" aria-controls="tab3" aria-selected="false" data-tab="tab3" tabindex="-1">Standard Results</button>
      <button class="tab-btn" role="tab" id="btn-tab5" aria-controls="tab5" aria-selected="false" data-tab="tab5" tabindex="-1">Head-to-Head</button>
      <button class="tab-btn" role="tab" id="btn-tab6" aria-controls="tab6" aria-selected="false" data-tab="tab6" tabindex="-1">Next Steps</button>
    </div>

    <!-- ============================================================
         TAB PANES
         ============================================================ -->
    <div class="tab-content">


      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 0: Executive Summary
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane active" id="tab0" role="tabpanel" aria-labelledby="btn-tab0" tabindex="0">
        <h2 class="section-header">Executive Summary</h2>

        <p style="font-size: 1.15rem; color: #006598; font-weight: 500; margin-bottom: 28px; line-height: 1.6;">
          We built <strong>two complementary models</strong> that identify patients at elevated risk for colorectal
          cancer &mdash; before symptoms appear &mdash; using data already captured in routine clinical care.
          The <strong>Full Data</strong> model leverages every clinical signal in Mercy&rsquo;s EHR;
          the <strong>FHIR Portable</strong> model uses only features available at any US hospital with
          a Cures Act&ndash;compliant EHR. Both deliver transformative screening efficiency.
        </p>

        <!-- ── The Stakes ── -->
        <h3>Why This Matters</h3>
        <p>
          Colorectal cancer is the <strong>second leading cause of cancer death</strong> in the United States.
          When caught early, the five-year survival rate is over <strong>90%</strong>. When caught late, it drops
          to <strong>14%</strong>. The difference is almost always whether the patient was screened in time.
        </p>
        <p>
          Many patients are never screened. They miss appointments, fall off care pathways, or simply
          aren't flagged for follow-up. This model finds them by identifying patterns in their existing
          medical records that correlate with undetected colorectal cancer.
        </p>

        <hr class="divider">

        <!-- ── The Headline ── -->
        <h3>The Bottom Line</h3>

        <div style="display: flex; flex-wrap: wrap; gap: 20px; margin: 24px 0;">

          <!-- Headline metric card -->
          <div style="flex: 1 1 100%; background: linear-gradient(135deg, #006598 0%, #004d73 100%); border-radius: 12px; padding: 32px 28px; text-align: center; color: #ffffff;">
            <div style="display: flex; justify-content: center; align-items: baseline; gap: 24px; flex-wrap: wrap;">
              <div>
                <div style="font-size: 3.2rem; font-weight: 800; letter-spacing: -1px;">22&times;</div>
                <div style="font-size: 0.85rem; font-weight: 500; opacity: 0.85; margin-top: 4px;">Full Data</div>
              </div>
              <div style="font-size: 1.5rem; font-weight: 300; opacity: 0.5; align-self: center;">&amp;</div>
              <div>
                <div style="font-size: 3.2rem; font-weight: 800; letter-spacing: -1px; color: #d4b8ff;">20&times;</div>
                <div style="font-size: 0.85rem; font-weight: 500; opacity: 0.85; margin-top: 4px;">FHIR Portable</div>
              </div>
            </div>
            <div style="font-size: 1.15rem; font-weight: 500; margin-top: 12px; opacity: 0.95;">
              more CRC cases identified in the highest-risk 1% of patients
            </div>
            <div style="font-size: 0.9rem; margin-top: 16px; opacity: 0.80; line-height: 1.7;">
              <strong>Top 1%:</strong> Screen just 1% of patients, find <strong>22% / 20%</strong> of all CRC cases (NNS: 13 / 14)<br>
              <strong>Top 10%:</strong> Screen 10% of patients, find <strong>55% / 50%</strong> of all CRC cases (NNS: 52 / 57)<br>
              <strong>100%:</strong> Screen everyone &rarr; find everyone (lift = 1.0&times;) &mdash; but at 286 patients per case found
            </div>
            <div style="font-size: 0.82rem; margin-top: 10px; opacity: 0.6;">
              The FHIR Portable model delivers comparable lift at every threshold &mdash; deployable at any FHIR-compliant hospital.
            </div>
          </div>

          <!-- Supporting metric cards -->
          <div style="flex: 1 1 200px; background: #f5f7fa; border: 1px solid #e0e7ed; border-radius: 10px; padding: 20px; text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #006598;">30 <span style="font-size:1rem; color:#999;">/</span> <span style="color:#6f42c1;">31</span></div>
            <div style="font-size: 0.88rem; color: #555;">Features Selected</div>
            <div style="font-size: 0.78rem; color: #888; margin-top: 4px;">Full Data / FHIR Portable</div>
          </div>

          <div style="flex: 1 1 200px; background: #f5f7fa; border: 1px solid #e0e7ed; border-radius: 10px; padding: 20px; text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #006598;">8</div>
            <div style="font-size: 0.88rem; color: #555;">Clinical Categories</div>
            <div style="font-size: 0.78rem; color: #888; margin-top: 4px;">labs, vitals, Dx, meds, &hellip;</div>
          </div>

          <div style="flex: 1 1 200px; background: #f5f7fa; border: 1px solid #e0e7ed; border-radius: 10px; padding: 20px; text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #006598;">858K</div>
            <div style="font-size: 0.88rem; color: #555;">Patient Observations</div>
            <div style="font-size: 0.78rem; color: #888; margin-top: 4px;">2023&ndash;2024 cohort</div>
          </div>



        </div>

        <hr class="divider">

        <!-- ── What makes it work ── -->
        <h3>What Makes This Model Work</h3>

        <p>
          Most published CRC prediction models use a single data source &mdash; typically a Complete Blood
          Count (CBC) lab panel plus age and gender. These models are essentially &ldquo;blood loss detectors&rdquo;:
          they find cancers that cause anemia, but miss the ones that don&rsquo;t.
        </p>
        <p>
          Our model draws from <strong>eight categories of clinical data</strong> that are routinely captured
          in every patient encounter:
        </p>

        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 10px; margin: 20px 0;">
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Labs</strong><br><span style="color:#666; font-size:0.82rem;">Blood work &amp; chemistry</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Vitals</strong><br><span style="color:#666; font-size:0.82rem;">Weight, BP, pulse</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Diagnoses</strong><br><span style="color:#666; font-size:0.82rem;">ICD-10 conditions</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Outpatient Meds</strong><br><span style="color:#666; font-size:0.82rem;">Prescription patterns</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Inpatient Meds</strong><br><span style="color:#666; font-size:0.82rem;">Hospital medications</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Visit History</strong><br><span style="color:#666; font-size:0.82rem;">Appointments &amp; no-shows</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Procedures</strong><br><span style="color:#666; font-size:0.82rem;">Imaging, transfusions</span></div>
          <div style="background:#f0f6fa; border-left:3px solid #006598; padding:10px 14px; border-radius:0 6px 6px 0; font-size:0.9rem;"><strong>Demographics</strong><br><span style="color:#666; font-size:0.82rem;">Age, gender</span></div>
        </div>

        <p>
          This breadth matters because colorectal cancer doesn&rsquo;t always announce itself through blood
          loss. Some patients show up through <strong>unexplained weight loss</strong>. Others through
          <strong>changes in visit patterns</strong> &mdash; more ER trips, missed follow-ups, GI symptoms
          without specialist referral. By looking across all eight categories, the model captures
          multiple pathways to the same disease.
        </p>

        <hr class="divider">

        <!-- ── How we know it's real ── -->
        <h3>How We Know the Signal Is Real</h3>

        <p>
          With nearly 858,000 observations, there is a real risk of finding patterns that look
          predictive but are actually noise. We addressed this with a rigorous, multi-stage
          selection process designed to ensure every feature earns its place:
        </p>

        <ol style="margin: 20px 0; padding-left: 0; list-style: none; counter-reset: rigor;">
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">1</span>
            <strong>425+ features engineered</strong> from raw clinical data across 7 specialized pipelines.
            We didn&rsquo;t just use what was obvious &mdash; we created acceleration measures, variability
            scores, composite risk indicators, and care pattern metrics.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">2</span>
            <strong>Statistical reduction to 169</strong> using effect size (risk ratios) and information content
            (mutual information) &mdash; not p-values, which are meaningless at this sample size.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">3</span>
            <strong>Correlation clustering</strong> grouped related features and removed redundancy,
            reducing to 141 while preserving the best representative from each group.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">4</span>
            <strong>29 rounds of iterative winnowing</strong> &mdash; at each round, the model was retrained
            and features that contributed little were identified through multiple independent criteria.
            No single metric could eliminate a feature on its own.
          </li>
          <li style="padding: 14px 16px 14px 60px; position: relative; margin-bottom: 10px; background: #f9fbfd; border-left: 4px solid #006598; border-radius: 0 6px 6px 0;">
            <span style="position: absolute; left: 16px; top: 12px; font-size: 1.3rem; font-weight: 700; color: #006598;">5</span>
            <strong>Cross-validation stability</strong> &mdash; all 30 final features were confirmed as
            important across 5 independent data splits. None survived by luck.
          </li>
        </ol>

        <div class="callout callout-info">
          <p>
            <strong>The result:</strong> 425+ candidate features reduced to 30 that are statistically robust,
            clinically interpretable, and independently validated. Every one of these features has a
            plain-English explanation that a clinician can review and understand.
          </p>
        </div>

        <hr class="divider">

        <!-- ── What a high score means ── -->
        <h3>What a High Risk Score Means in Practice</h3>

        <p>
          When the model assigns a high risk score to a patient, it&rsquo;s not a diagnosis. It&rsquo;s a
          recommendation to prioritize that patient for screening. The score is based on patterns like:
        </p>

        <ul style="margin: 16px 0 20px 20px;">
          <li><strong>Blood pressure variability</strong> that has increased over recent months</li>
          <li><strong>Unexplained weight loss</strong> or declining weight trajectory</li>
          <li>A <strong>high-risk medical history</strong> (prior polyps, family history, inflammatory bowel disease)</li>
          <li><strong>Declining albumin</strong> or other lab markers suggesting systemic illness</li>
          <li>Patterns of <strong>GI-related visits without specialist follow-up</strong></li>
          <li><strong>Iron deficiency</strong> with or without diagnosed anemia</li>
        </ul>

        <p>
          The model produces a <strong>risk flag</strong> identifying patients in the highest-risk group
          for targeted screening outreach. The care team can then apply clinical judgment to determine
          appropriate next steps for each flagged patient.
        </p>

        <div class="callout callout-info" style="margin-top:20px;">
          <p class="callout-title">From Model Output to Clinical Action</p>
          <p>
            The raw model output (XGBoost predicted probabilities) goes through a three-step calibration
            pipeline before reaching the clinical workflow:
          </p>
          <ol style="margin: 12px 0 0 20px;">
            <li style="margin-bottom:8px;">
              <strong>Isotonic calibration</strong> (fitted on training data) &mdash; aligns predicted
              probabilities with observed event rates, correcting any systematic over- or under-confidence
            </li>
            <li style="margin-bottom:8px;">
              <strong>Quantile transformation</strong> &mdash; maps calibrated probabilities to a 0&ndash;100
              risk score where each point represents a percentile of the patient population
            </li>
            <li style="margin-bottom:8px;">
              <strong>High-risk flag</strong> &mdash; patients above a clinical threshold receive a flag in
              the EHR workflow. The care team never sees raw probabilities or numeric risk scores &mdash;
              only the actionable flag
            </li>
          </ol>
        </div>

        <hr class="divider">

        <!-- ── Quick comparison ── -->
        <h3>How This Compares</h3>

        <div class="table-wrapper">
          <table class="comparison-table" style="border-left: 4px solid #006598;">
            <thead>
              <tr>
                <th scope="col">Dimension</th>
                <th scope="col">Vendor Models (e.g., ColonFlag)</th>
                <th scope="col">Our Model</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="row-label">Data Used</td>
                <td>Blood tests + age + gender<br><span style="font-size:0.82rem; color:#888;">(~8&ndash;10 features)</span></td>
                <td><strong>8 clinical categories</strong><br><span style="font-size:0.82rem; color:#888;">(30&ndash;31 features from vitals, diagnoses, labs, visits, demographics, procedures)</span></td>
              </tr>
              <tr>
                <td class="row-label">Trained On</td>
                <td>Israeli or Kaiser Permanente patients</td>
                <td><strong>Mercy and Lucem patients</strong></td>
              </tr>
              <tr>
                <td class="row-label">Ongoing Cost</td>
                <td>Per-patient licensing fees</td>
                <td><strong>Internal maintenance</strong></td>
              </tr>
              <tr>
                <td class="row-label">Screening Efficiency</td>
                <td>Reported as odds ratios, not lift</td>
                <td><strong>22&times; / 20&times; lift</strong> at top 1%</td>
              </tr>
            </tbody>
          </table>
        </div>

        <hr class="divider">

        <!-- ── Next Steps ── -->
        <h3>What Happens Next</h3>
        <p>
          Both models are trained and validated. The FHIR Portable variant demonstrates that
          <strong>strong clinical performance is achievable</strong> using only standard FHIR features &mdash;
          20&times; lift at top 1%, 5&times; at top 10%, with no custom integrations required. The path to production:
        </p>

        <ol style="margin: 12px 0 20px 20px;">
          <li style="margin-bottom:8px;"><strong>Lucem reviews the feature catalog</strong> (<a href="appendix_b_feature_catalog.html" style="color:#006598;">Appendix B</a>) to confirm which features are available in their EHR and determine the deployment model</li>
          <li style="margin-bottom:8px;"><strong>Hyperparameter tuning</strong> (Optuna) on the selected model variants to squeeze maximum performance</li>
          <li style="margin-bottom:8px;"><strong>Isotonic calibration + quantile transformation</strong> to produce a 0&ndash;100 risk score and clinical high-risk flag</li>
          <li style="margin-bottom:8px;"><strong>Model replication in Vertex AI</strong> on Google Cloud Platform for production deployment</li>
        </ol>

        <p style="font-size:0.88rem; color:#888; margin-top:16px;">
          <em>Both models trained on 858K+ patient observations from Mercy&rsquo;s EHR (2023&ndash;2024). All metrics computed on a held-out test set never used during training or feature selection.</em>
        </p>

      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 1: Methodology Overview
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab1" role="tabpanel" aria-labelledby="btn-tab1" tabindex="0" hidden>
        <h2 class="section-header">Methodology Overview</h2>

        <!-- Opening Statement -->
        <p style="font-size: 1.1rem; color: #006598; font-weight: 500; margin-bottom: 24px;">
          Advancing Mercy and Lucem's commitment to Excellence and Stewardship through data-driven early detection of colorectal cancer.
        </p>

        <!-- The Challenge -->
        <h3>The Challenge</h3>
        <p>
          Colorectal cancer (CRC) is the <strong>second leading cause of cancer death</strong> in the United States.
          When caught early, the five-year survival rate is over 90%. When caught late, that number drops to just 14%.
          The difference between early and late detection is often the difference between life and death.
        </p>
        <p>
          Yet many patients are never screened. They fall through the cracks &mdash; no colonoscopy scheduled,
          no follow-up after a missed appointment, no flag in the system. These are the patients we built this model to find.
        </p>
        <p>
          Using <strong>858,000+ patient observations</strong> from Mercy&rsquo;s electronic health records, we developed
          two models that identify high-risk unscreened patients based on their existing clinical data &mdash;
          labs, vitals, diagnoses, medications, procedures, and visit patterns.
          In production, any patient age 45+ who is due for CRC screening receives a risk score
          (see <a href="appendix_d_cohort_selection.html" style="color:#006598;">Appendix D</a> for inference population and training cohort details). The <strong>Full Data</strong> model
          uses every available signal; the <strong>FHIR Portable</strong> model restricts to features available
          at any Cures Act&ndash;compliant hospital. Both run through the same rigorous 5-phase selection pipeline.
        </p>

        <hr class="divider">

        <!-- Pipeline Overview Flow Diagram -->
        <h3>How We Built It: The Pipeline</h3>
        <p>
          Building a reliable prediction model is not a single step &mdash; it is a careful, multi-stage process.
          Both models follow the same 5-phase pipeline; the diagram below shows the <strong>Full Data</strong> model&rsquo;s
          numbers. We started with eight categories of clinical data, engineered over 400 candidate features, used statistical
          methods to identify the 169 most informative, and then systematically winnowed to the 30 signals that matter most.
          The <strong>FHIR Portable</strong> model runs the identical pipeline starting from 118 candidates
          (after excluding features not available in standard FHIR), winnowing through 14 rounds to 31 final features.
        </p>

        <div class="flow-diagram">
          <div class="flow-step">
            8 Clinical<br>Categories
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            7 Books<br>Engineer<br><span class="flow-count">~425</span><br>Features
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Statistical<br>Reduction<br><span style="font-size:0.75rem; color:#bf5412;">(Risk Ratios + MI)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            169 Candidate<br>Features
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Hierarchical<br>Clustering
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Iterative<br>Winnowing<br><span class="flow-count">29 rounds</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Cross-Validation<br>Stability
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Parsimony<br>Selection
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            30 Final<br>Features
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            Production<br>Model
          </div>
        </div>

        <p class="text-muted" style="text-align: center; margin-top: -8px;">
          Full Data pipeline shown. FHIR Portable follows the same process: 118 candidates &rarr; 14 rounds &rarr; 31 features.
        </p>

        <hr class="divider">

        <!-- Key Numbers Callout Cards -->
        <h3>By the Numbers <span style="font-size:0.7em; font-weight:400; color:#666;">(Full Data model)</span></h3>
        <div class="metric-cards">
          <div class="metric-card">
            <div class="metric-value">858,000+</div>
            <div class="metric-label">Patient Observations</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">~425</div>
            <div class="metric-label">Features Engineered</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">169</div>
            <div class="metric-label">Statistical Survivors</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">7</div>
            <div class="metric-label">Feature Engineering Books</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">29</div>
            <div class="metric-label">Iterative Winnowing Rounds</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">30</div>
            <div class="metric-label">Final Features Selected</div>
          </div>
        </div>

        <hr class="divider">

        <!-- From Raw Data to Candidate Features -->
        <h3>From Raw Data to Candidate Features</h3>
        <p>
          For the Full Data model, the 169 candidate features that enter the winnowing process are themselves the output of an earlier
          reduction. Seven dedicated feature engineering pipelines each extract and engineer features from a
          single clinical data source, producing <strong>over 425 features in total</strong>. Each pipeline then
          applies statistical screening &mdash; risk ratio analysis and mutual information scoring &mdash;
          to identify which engineered features carry genuine predictive signal for CRC, discarding
          those that are redundant, noisy, or clinically irrelevant. A final compilation step merges the
          survivors into a single wide table. The FHIR Portable model follows the same pipeline but
          excludes features not available in standard FHIR R4 implementations, starting from 118 candidates.
        </p>

        <!-- Single Book Schematic -->
        <h4>How a Single Pipeline Works: Laboratory Results</h4>
        <p>
          Each of the seven feature engineering pipelines follows the same disciplined process. Here is
          Laboratory Results as a representative example:
        </p>

        <div class="flow-diagram">
          <div class="flow-step">
            Raw Lab<br>Results<br><span style="font-size:0.72rem; color:#888;">(15 test types)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Feature<br>Engineering<br><span class="flow-count">93 features</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Risk Ratio<br>Screening<br><span style="font-size:0.72rem; color:#888;">(effect size)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step">
            Mutual Info<br>Scoring<br><span style="font-size:0.72rem; color:#888;">(non-linear signal)</span>
          </div>
          <div class="flow-arrow">&rarr;</div>
          <div class="flow-step flow-highlight">
            25 Survivors<br><span style="font-size:0.72rem; color:rgba(255,255,255,0.8);">(73% reduction)</span>
          </div>
        </div>

        <p style="font-size:0.92rem; color:#555;">
          From 15 raw lab test types, this pipeline engineers 93 features &mdash; latest values, velocities (rate of change),
          accelerations (change in rate of change), composite flags (like &ldquo;comprehensive iron deficiency&rdquo;),
          and interaction terms. Statistical screening then identifies the 25 that carry the most information about
          future CRC risk, eliminating redundant time windows (e.g., keeping 6-month change but not also 12-month),
          low-prevalence markers, and features that duplicate signal already captured elsewhere.
        </p>

        <!-- Per-Book Breakdown (collapsible) -->
        <div class="collapsible">
          <div class="collapsible-header" role="button" tabindex="0" aria-expanded="false">
            <h4>Feature Counts by Data Source</h4>
            <span class="collapse-icon">&#9660;</span>
          </div>
          <div class="collapsible-body">
            <div class="table-wrapper">
              <table class="comparison-table">
                <thead>
                  <tr>
                    <th scope="col">Step</th>
                    <th scope="col">Domain</th>
                    <th scope="col">Engineered</th>
                    <th scope="col">Survived</th>
                    <th scope="col">Reduction</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="row-label">1</td>
                    <td>Demographics</td>
                    <td>13</td>
                    <td>11</td>
                    <td>15%</td>
                  </tr>
                  <tr>
                    <td class="row-label">2</td>
                    <td>Vitals</td>
                    <td>~70</td>
                    <td>24</td>
                    <td>66%</td>
                  </tr>
                  <tr>
                    <td class="row-label">3</td>
                    <td>ICD-10 Diagnoses</td>
                    <td>116</td>
                    <td>26</td>
                    <td>78%</td>
                  </tr>
                  <tr>
                    <td class="row-label">4</td>
                    <td>Social Factors</td>
                    <td>~30</td>
                    <td>0</td>
                    <td style="color:#bf5412; font-weight:600;">100% &mdash; excluded</td>
                  </tr>
                  <tr>
                    <td class="row-label">5</td>
                    <td>Laboratory Results</td>
                    <td>93</td>
                    <td>25</td>
                    <td>73%</td>
                  </tr>
                  <tr>
                    <td class="row-label">6a</td>
                    <td>Outpatient Medications</td>
                    <td>48</td>
                    <td>19</td>
                    <td>60%</td>
                  </tr>
                  <tr>
                    <td class="row-label">6b</td>
                    <td>Inpatient Medications</td>
                    <td>48</td>
                    <td>20</td>
                    <td>58%</td>
                  </tr>
                  <tr>
                    <td class="row-label">7</td>
                    <td>Visit History</td>
                    <td>41</td>
                    <td>24</td>
                    <td>41%</td>
                  </tr>
                  <tr>
                    <td class="row-label">8</td>
                    <td>Procedures</td>
                    <td>33</td>
                    <td>17</td>
                    <td>49%</td>
                  </tr>
                  <tr style="background-color:#f0f6fa; font-weight:600;">
                    <td class="row-label">Total</td>
                    <td></td>
                    <td>~425</td>
                    <td>169*</td>
                    <td>60%</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p style="font-size:0.88rem; color:#555; margin-top:12px;">
              <strong>Social Factors (step 4)</strong> was fully excluded due to data quality issues &mdash; 78% of
              patients had default &ldquo;never smoker&rdquo; status due to Epic workflow artifacts, producing
              inverted risk relationships. All ~30 social features were removed before compilation.
              The final compilation step merges survivors and applies exclusions
              (CEA, CA19-9, FOBT for circular reasoning; <code>MONTHS_SINCE_COHORT_ENTRY</code> for prevalence bias).
              *Total includes features derived during the compilation step.
            </p>
          </div>
        </div>

        <!-- Value of Statistical Screening Callout -->
        <div class="callout callout-success">
          <p class="callout-title">Why Statistical Screening Matters: Surfacing What Intuition Misses</p>
          <p>
            This automated, data-driven process does more than filter noise &mdash; it surfaces features that
            clinical intuition alone might overlook, and it rigorously tests whether their signal is truly
            independent. For example, <strong>hemoglobin&rsquo;s accelerating decline</strong> &mdash; a second-derivative
            trend computed from serial lab draws &mdash; showed <strong>10.9&times; elevated CRC risk</strong> during
            initial statistical screening. But the iterative winnowing process determined that its predictive signal
            was already captured by simpler hemoglobin and iron features, so it was correctly eliminated as redundant.
            The pipeline doesn&rsquo;t just find strong signals &mdash; it identifies which ones are truly independent.
          </p>
          <p>
            The features that <em>do</em> survive are often ones a clinician would never think to look for.
            <strong>Systolic blood pressure variability over 6 months</strong> is the #1 feature in both
            models by SHAP importance &mdash; a pattern that exists in the data but would never appear on
            a clinical problem list. The combination of domain-driven feature engineering (what to measure)
            with statistical screening (what matters) is what gives this pipeline its power.
          </p>
        </div>

        <hr class="divider">

        <!-- Feature Categories Table -->
        <h3>What Data Goes In: Eight Clinical Categories</h3>
        <p>
          Every feature in both models traces back to real clinical data already captured in Mercy and Lucem&rsquo;s EHR.
          We organized the raw data into eight categories, then engineered predictive signals from each.
          The table below shows the 169 survivors from the Full Data model that enter the winnowing process.
        </p>

        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th scope="col">Category</th>
                <th scope="col">Source</th>
                <th scope="col">Features</th>
                <th scope="col">Examples</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="row-label">Demographics</td>
                <td>Patient records</td>
                <td>11</td>
                <td>Age, gender, race, marital status, PCP status</td>
              </tr>
              <tr>
                <td class="row-label">Vitals</td>
                <td>Clinical measurements</td>
                <td>24</td>
                <td>BMI, blood pressure, weight changes, temperature</td>
              </tr>
              <tr>
                <td class="row-label">ICD-10 Diagnoses</td>
                <td>Diagnosis codes</td>
                <td>26</td>
                <td>GI symptoms, anemia, comorbidity scores</td>
              </tr>
              <tr>
                <td class="row-label">Laboratory Results</td>
                <td>Lab panels</td>
                <td>25</td>
                <td>CBC, iron studies, liver enzymes, trajectories</td>
              </tr>
              <tr>
                <td class="row-label">Outpatient Medications</td>
                <td>Pharmacy records</td>
                <td>19</td>
                <td>GI medications, pain management, supplements</td>
              </tr>
              <tr>
                <td class="row-label">Inpatient Medications</td>
                <td>Hospital records</td>
                <td>20</td>
                <td>IV iron, PPIs, clinical syndrome composites</td>
              </tr>
              <tr>
                <td class="row-label">Visit History</td>
                <td>Appointment records</td>
                <td>24</td>
                <td>Visit frequency, no-show patterns, specialty visits</td>
              </tr>
              <tr>
                <td class="row-label">Procedures</td>
                <td>Clinical procedures</td>
                <td>17</td>
                <td>Imaging, transfusions, iron infusions, endoscopies</td>
              </tr>
              <tr style="background-color:#f0f6fa; font-weight:600;">
                <td class="row-label">Total</td>
                <td></td>
                <td>169</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>

        <hr class="divider">

        <!-- Methodology Rigor Callout -->
        <h3>Built for Trust: Our Safeguards</h3>
        <div class="callout callout-info">
          <p class="callout-title">Why This Methodology Is Conservative by Design</p>
          <p>
            In a dataset with a 0.36% positive rate &mdash; 1 CRC case for every 277 patient observations &mdash;
            an aggressive model could easily latch onto noise rather than genuine clinical signal.
            Every design choice prioritizes stability and reliability over raw performance.
          </p>
          <ul>
            <li>
              <strong>Ultra-conservative model parameters</strong> prevent overfitting. The model uses very shallow
              decision trees and heavy regularization, learning slowly and deliberately.
            </li>
            <li>
              <strong>Multi-criteria removal:</strong> A feature is only removed if it fails at least two of three
              independent tests &mdash; near-zero contribution, negative-biased signal, and bottom ranking.
              No feature is dropped based on a single metric.
            </li>
            <li>
              <strong>Cluster protection rules</strong> ensure that at least one representative from each group
              of correlated features is always preserved. The model never loses an entire category of signal.
            </li>
            <li>
              <strong>29 winnowing rounds,</strong> each removing only a handful of features at a time.
              This is a cautious, data-driven process &mdash; not aggressive pruning.
            </li>
            <li>
              <strong>5-fold cross-validation</strong> confirms that the selected features are stable
              across different patient subsets &mdash; not an artifact of any single data split.
            </li>
          </ul>
          <p>
            The result is a set of 30 features that have earned their place through repeated,
            independent evaluation &mdash; identifying the most predictive signals (feature selection) while
            guarding against the risk of over-fitting a rare outcome.
          </p>
        </div>

      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 2: Model Variants
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab2" role="tabpanel" aria-labelledby="btn-tab2" tabindex="0" hidden>
        <h2 class="section-header">Model Variants</h2>

        <!-- Why Two Variants? -->
        <h3>Why Two Variants?</h3>
        <p>
          We built two models using the <strong>same automated pipeline</strong> but different
          feature pools. The <strong>Full Data</strong> model uses every clinical data category
          available in Mercy&rsquo;s EHR. The <strong>FHIR Portable</strong> model uses only
          features available in standard US hospital FHIR R4 implementations &mdash; no custom
          integrations, no medication mapping, no visit/scheduling data. The result: the portable
          model delivers <strong>20&times; lift at top 1%</strong> and <strong>5&times; at top 10%</strong>,
          closely tracking the Full Data model at every clinical operating point while being deployable at any
          Cures Act&ndash;compliant hospital.
        </p>

        <hr class="divider">

        <!-- Three Model Cards -->
        <h3>Two Models, Two Deployment Scenarios</h3>
        <div class="model-cards">

          <!-- Card 1: Full Data -->
          <div class="model-card" style="border: 2px solid #006598;">
            <span class="model-tag tag-full">Full Data</span>
            <h3>Mercy Full Data</h3>
            <p style="font-weight:600; color:#333; margin-bottom:12px;">All 8 Clinical Categories</p>
            <ul style="font-size:0.92rem; color:#555; padding-left:18px; margin-bottom:16px;">
              <li style="margin-bottom:8px;">
                ~425 engineered features from 8 categories (demographics, vitals, diagnoses, labs,
                medications, visits, procedures) &rarr; 169 candidates after statistical screening &rarr; 30 final
              </li>
              <li style="margin-bottom:8px;">
                Leverages every available clinical signal from Mercy&rsquo;s EHR, including
                medication history and visit patterns
              </li>
            </ul>
            <p style="font-size:0.82rem; color:#006598; font-style:italic; border-top:1px solid #e0e7ed; padding-top:10px; margin-bottom:0;">
              Maximum performance &mdash; what&rsquo;s possible with complete data
            </p>
          </div>

          <!-- Card 2: FHIR Portable (Cross-Hospital) -->
          <div class="model-card">
            <span class="model-tag tag-fhir">Cross-Hospital</span>
            <h3>FHIR Portable</h3>
            <p style="font-weight:600; color:#333; margin-bottom:12px;">Standard FHIR Resources Only</p>
            <ul style="font-size:0.92rem; color:#555; padding-left:18px; margin-bottom:16px;">
              <li style="margin-bottom:8px;">
                ~290 FHIR-eligible features from 5 categories (demographics, vitals, diagnoses, labs,
                procedures) &rarr; 118 candidates after screening &rarr; 31 final
              </li>
              <li style="margin-bottom:8px;">
                <strong>Excludes:</strong> All medications (requires RxNorm mapping), visit history
                (scheduling data), inpatient MAR, specialty labs (CRP, ESR, CA-125)
              </li>
              <li style="margin-bottom:8px;">
                Works with any Cures Act&ndash;compliant EHR &mdash; no custom integrations required
              </li>
            </ul>
            <p style="font-size:0.82rem; color:#6f42c1; font-style:italic; border-top:1px solid #e0e7ed; padding-top:10px; margin-bottom:0;">
              Cross-hospital portability &mdash; 20&times; lift at top 1%, 5&times; at top 10%
            </p>
          </div>

        </div><!-- end .model-cards -->

        <hr class="divider">

        <!-- Feature Count Comparison (CSS Bar Chart) -->
        <h3>Feature Count Comparison</h3>
        <p>
          Each variant starts from a different pool of features depending on which clinical data
          categories are available. The same 5-phase pipeline then winnows each pool to the
          most predictive signals. FHIR Portable excludes three entire categories (outpatient medications,
          inpatient medications, and visit history) plus select specialty labs and procedures, starting
          from a smaller pool.
        </p>

        <h4 style="color:#555; font-size:0.95rem; margin-top:24px; margin-bottom:12px;">1. Features Engineered (Books 0&ndash;7)</h4>
        <div class="bar-chart">
          <div class="bar-row">
            <div class="bar-label">Full Data</div>
            <div class="bar-track">
              <div class="bar-fill fill-primary" style="width:100%;">~425 features from 8 categories</div>
            </div>
          </div>
          <div class="bar-row">
            <div class="bar-label">FHIR Portable</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:68%; background: linear-gradient(90deg, #6f42c1, #9d7bd8);">~290 features from 5 categories</div>
            </div>
          </div>
        </div>

        <h4 style="color:#555; font-size:0.95rem; margin-top:24px; margin-bottom:12px;">2. Candidate Pool (After Statistical Screening)</h4>
        <div class="bar-chart">
          <div class="bar-row">
            <div class="bar-label">Full Data</div>
            <div class="bar-track">
              <div class="bar-fill fill-primary" style="width:100%;">169 candidates</div>
            </div>
          </div>
          <div class="bar-row">
            <div class="bar-label">FHIR Portable</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:70%; background: linear-gradient(90deg, #6f42c1, #9d7bd8);">118 candidates</div>
            </div>
          </div>
        </div>

        <h4 style="color:#555; font-size:0.95rem; margin-top:24px; margin-bottom:12px;">3. Final Features (After Winnowing)</h4>
        <div class="bar-chart">
          <div class="bar-row">
            <div class="bar-label">Full Data</div>
            <div class="bar-track">
              <div class="bar-fill fill-primary" style="width:97%;">30 features</div>
            </div>
          </div>
          <div class="bar-row">
            <div class="bar-label">FHIR Portable</div>
            <div class="bar-track">
              <div class="bar-fill" style="width:100%; background: linear-gradient(90deg, #6f42c1, #9d7bd8);">31 features</div>
            </div>
          </div>
        </div>

        <hr class="divider">

        <!-- Key Insight Callout -->
        <div class="callout callout-success">
          <p class="callout-title">Independent Optimization</p>
          <p>
            Each model variant is built from scratch through the complete 5-phase pipeline &mdash;
            not pruned from the Full Data model. This ensures each variant is independently optimized
            for its available data. The feature selection process discovers the best signals
            within each data scope, giving us a true measure of what each feature pool contributes.
          </p>
        </div>

      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 3: Standard Model Results
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab3" role="tabpanel" aria-labelledby="btn-tab3" tabindex="0" hidden>
        <h2 class="section-header">Standard Model Results</h2>

        <p>
          Side-by-side results from both model variants. The Full Data model uses every available
          clinical signal; the FHIR Portable model uses only features available via standard FHIR.
          All metrics are computed on the held-out test set &mdash; patients neither model
          saw during training or feature selection.
        </p>

        <!-- Held-Out Test Set Explanation -->
        <div class="callout callout-info">
          <p class="callout-title">Why &ldquo;Held-Out&rdquo; Matters</p>
          <p>
            Before any modeling began, we set aside 15% of patients as a test set.
            These patients were never used during training or feature selection.
            Metrics on the test set represent how the model would perform on truly new
            patients &mdash; the closest approximation to real-world deployment we can
            get without actually deploying.
          </p>
        </div>

        <hr class="divider">

        <!-- Metric Explanation Cards -->
        <h3>Understanding the Metrics</h3>
        <div class="metric-cards">
          <div class="metric-card" style="border-top: 3px solid #bf5412;">
            <div class="metric-value" style="color:#bf5412;">Lift</div>
            <div class="metric-label">Primary Metric</div>
          </div>
          <div class="metric-card">
            <div class="metric-value">AUPRC</div>
            <div class="metric-label">Precision-Recall</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" style="color:#888;">AUROC</div>
            <div class="metric-label">Reported for Context</div>
          </div>
        </div>

        <div style="margin-top: 16px;">
          <p>
            <strong style="color:#bf5412;">Lift (Screening Efficiency)</strong> &mdash;
            The most operationally meaningful metric for this model. Lift answers the question clinicians
            actually care about: <em>&ldquo;If we prioritize the top N% of patients by risk score for screening outreach,
            how many more CRC cases will we find compared to reaching out at random?&rdquo;</em>
          </p>
          <p>
            A lift of 22&times; at the top 1% means the highest-risk 1% of patients contains 22 times more CRC cases
            than a random 1% sample. This translates directly to <strong>screening program efficiency</strong> &mdash;
            the same outreach budget reaches far more patients who actually need colonoscopies. We report lift
            at multiple thresholds (top 1%, 5%, 10%) because the operational question is &ldquo;how many patients
            can we contact?&rdquo; &mdash; and the answer determines which threshold to use.
          </p>

          <p>
            <strong>AUPRC (Area Under Precision-Recall Curve)</strong> &mdash;
            Summarizes model quality across all decision thresholds. At our 0.36% prevalence,
            a random classifier scores 0.0036. Published CRC models (e.g., ColonFlag) report
            AUPRC of 0.05&ndash;0.10 &mdash; but at prevalence rates of 1&ndash;2%, where the problem is
            3&ndash;5&times; easier. Our Full Data model achieves <strong>0.0622</strong> (17&times; above random)
            at nearly 5&times; lower prevalence, and the FHIR Portable model achieves <strong>0.0478</strong>
            (13&times; above random). AUPRC was
            used to guide model selection during training because it correctly penalizes false positives
            in highly imbalanced settings.
          </p>

          <div class="callout callout-warning" style="margin-top:16px; margin-bottom:16px;">
            <p class="callout-title">Why AUROC Is Misleading at 277:1 Class Imbalance</p>
            <p>
              <strong>AUROC</strong> measures the model&rsquo;s ability to rank positives above negatives, but at extreme
              class imbalance it becomes dangerously uninformative. Here is why:
            </p>
            <ul>
              <li>
                A model that <strong>correctly rejects 99.6% of negatives but finds zero CRC cases</strong> still
                achieves a decent AUROC, because the ROC curve&rsquo;s x-axis (false positive rate) is dominated
                by the massive negative class. Correctly ranking a few hundred negatives outweighs missing all positives.
              </li>
              <li>
                At 0.36% prevalence, even a 1% false positive rate means flagging <strong>2,780 healthy patients
                for every 10 true CRC cases</strong>. AUROC cannot distinguish a model that flags 2,780 from one that
                flags 28,000 &mdash; both look similar on the ROC curve.
              </li>
              <li>
                Published CRC models report AUROCs of 0.75&ndash;0.85, but these numbers were computed on populations
                with 5&times; higher prevalence. Our AUROC is <strong>not directly comparable</strong> to theirs.
              </li>
            </ul>
            <p>
              We report AUROC for completeness and comparability with published literature, but it did
              <strong>not</strong> influence any model selection decision. AUPRC and lift are the metrics that
              matter for this problem.
            </p>
          </div>
        </div>

        <hr class="divider">

        <!-- Summary Metrics Table -->
        <h3>Summary Metrics</h3>
        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th scope="col">Metric</th>
                <th scope="col">Full Data</th>
                <th scope="col" style="background:#6f42c1;">FHIR Portable</th>
              </tr>
            </thead>
            <tbody>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 1%</td>
                <td><strong>22.1&times;</strong></td>
                <td><strong>19.9&times;</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 10%</td>
                <td><strong>5.5&times;</strong></td>
                <td><strong>5.0&times;</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 1%</td>
                <td><strong>13</strong></td>
                <td><strong>14</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 10%</td>
                <td><strong>52</strong></td>
                <td><strong>57</strong></td>
              </tr>
              <tr>
                <td>Test AUPRC</td>
                <td><strong>0.0622</strong></td>
                <td>0.0478</td>
              </tr>
              <tr>
                <td>Test AUROC</td>
                <td><strong>0.8308</strong></td>
                <td>0.7866</td>
              </tr>
              <tr>
                <td>Final Feature Count</td>
                <td><strong>30</strong></td>
                <td><strong>31</strong></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p style="font-size:0.82rem; color:#666; margin-top:6px;">NNS = Number Needed to Screen &mdash; patients screened to find one CRC case. Random screening baseline: 286 patients per case found.</p>

        <!-- Interpretation Callout -->
        <div class="callout callout-info" style="margin-top:20px;">
          <p class="callout-title">Reading This Table</p>
          <p>
            <strong>At the top 1%</strong> (highest-acuity outreach), Full Data finds 22% of CRC cases and FHIR Portable finds 20% &mdash;
            screening 13 vs. 14 patients per case found. <strong>At the top 10%</strong> (broader screening program),
            Full Data finds 55% of cases and FHIR Portable finds 50%, screening 52 vs. 57 patients per case.
            Both models are far superior to unguided screening, where 286 patients must be screened per case found.
          </p>
          <p>
            The gap between models widens for overall statistical metrics: FHIR Portable&rsquo;s AUPRC is 23% lower (0.048 vs. 0.062)
            and its AUROC is 5% lower (0.79 vs. 0.83). These differences reflect the Full Data model&rsquo;s richer feature set
            (visit patterns, PCP status, specialty labs) improving ranking quality across the entire score distribution.
            At the clinical operating points that matter most &mdash; the top 1&ndash;10% where outreach resources are deployed &mdash;
            the models perform comparably.
          </p>
        </div>

        <hr class="divider">


      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 5: Head-to-Head Comparison
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab5" role="tabpanel" aria-labelledby="btn-tab5" tabindex="0" hidden>
        <h2 class="section-header">Head-to-Head Comparison</h2>

        <p>
          Side-by-side comparison of both model variants. The Full Data model represents maximum
          performance with complete Mercy data; the FHIR Portable model demonstrates how much
          of that performance is retained using only standard FHIR features.
        </p>

        <!-- ── Summary Comparison Table ── -->
        <h3>Summary Metrics</h3>
        <div class="table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th scope="col">Metric</th>
                <th scope="col">Full Data</th>
                <th scope="col" style="background:#6f42c1;">FHIR Portable</th>
              </tr>
            </thead>
            <tbody>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 1%</td>
                <td><strong>22.1&times;</strong></td>
                <td><strong>19.9&times;</strong></td>
              </tr>

              <tr style="background-color:#fff8f4;">
                <td class="row-label">Lift @ Top 10%</td>
                <td><strong>5.5&times;</strong></td>
                <td><strong>5.0&times;</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 1%</td>
                <td><strong>13</strong></td>
                <td><strong>14</strong></td>
              </tr>
              <tr style="background-color:#fff8f4;">
                <td class="row-label">NNS @ Top 10%</td>
                <td><strong>52</strong></td>
                <td><strong>57</strong></td>
              </tr>
              <tr>
                <td>Test AUPRC</td>
                <td><strong>0.0622</strong></td>
                <td>0.0478</td>
              </tr>
              <tr>
                <td>Test AUROC</td>
                <td><strong>0.8308</strong></td>
                <td>0.7866</td>
              </tr>
              <tr>
                <td class="row-label">Final Features</td>
                <td><strong>30</strong></td>
                <td><strong>31</strong></td>
              </tr>

            </tbody>
          </table>
        </div>
        <p style="font-size:0.82rem; color:#666; margin-top:6px;">Lift rows highlighted &mdash; these are the primary operational metrics. NNS = Number Needed to Screen (patients screened per cancer found; random baseline = 286). AUROC grayed because it is misleading at 277:1 class imbalance (see Standard Results tab for details). AUPRC guided model selection during training.</p>

        <hr class="divider">

        <!-- ── Screening Efficiency Chart ── -->
        <h3>Screening Efficiency: Models vs. Random</h3>
        <p style="font-size:0.88rem; color:#555; margin-bottom:16px;">
          If you screen a fixed portion of patients, how many CRC cases does each model find &mdash;
          and how does that compare to screening at random?
        </p>
        <div style="text-align:center; margin:20px 0;">
          <svg viewBox="0 0 680 440" style="max-width:620px; width:100%; height:auto; font-family:'Inter','Segoe UI',sans-serif;" role="img" aria-label="Bar chart comparing CRC cases found by Full Data, FHIR Portable, and random screening at top 1% and top 10% thresholds">

            <!-- Chart background -->
            <rect x="80" y="40" width="540" height="320" fill="#fafbfc" rx="4"/>

            <!-- Horizontal gridlines -->
            <line x1="80" y1="93" x2="620" y2="93" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="80" y1="147" x2="620" y2="147" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="80" y1="200" x2="620" y2="200" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="80" y1="253" x2="620" y2="253" stroke="#e8e8e8" stroke-width="0.5"/>
            <line x1="80" y1="307" x2="620" y2="307" stroke="#e8e8e8" stroke-width="0.5"/>

            <!-- Y-axis: 0% to 60%, chart height 320px → 5.33px per % -->
            <!-- Axes -->
            <line x1="80" y1="360" x2="620" y2="360" stroke="#333" stroke-width="1.5"/>
            <line x1="80" y1="40" x2="80" y2="360" stroke="#333" stroke-width="1.5"/>

            <!-- Y-axis labels -->
            <text x="72" y="364" text-anchor="end" font-size="11" fill="#666">0%</text>
            <text x="72" y="307" text-anchor="end" font-size="11" fill="#666">10%</text>
            <text x="72" y="253" text-anchor="end" font-size="11" fill="#666">20%</text>
            <text x="72" y="200" text-anchor="end" font-size="11" fill="#666">30%</text>
            <text x="72" y="147" text-anchor="end" font-size="11" fill="#666">40%</text>
            <text x="72" y="93" text-anchor="end" font-size="11" fill="#666">50%</text>
            <text x="72" y="40" text-anchor="end" font-size="11" fill="#666">60%</text>

            <!-- Y-axis title -->
            <text x="22" y="200" text-anchor="middle" font-size="12" fill="#333" font-weight="500" transform="rotate(-90 22 200)">% of CRC Cases Found</text>

            <!-- ═══ GROUP 1: Screen Top 1% ═══ -->
            <!-- Full Data: 22% → height=117, top=243 -->
            <rect x="140" y="243" width="55" height="117" fill="#006598" rx="3"/>
            <text x="167" y="236" text-anchor="middle" font-size="12" fill="#006598" font-weight="700">22%</text>

            <!-- FHIR Portable: 20% → height=107, top=253 -->
            <rect x="205" y="253" width="55" height="107" fill="#6f42c1" rx="3"/>
            <text x="232" y="246" text-anchor="middle" font-size="12" fill="#6f42c1" font-weight="700">20%</text>

            <!-- Random: 1% → height=5, top=355 -->
            <rect x="270" y="355" width="55" height="5" fill="#ccc" rx="1"/>
            <text x="297" y="348" text-anchor="middle" font-size="11" fill="#999" font-weight="600">1%</text>

            <!-- Group label -->
            <text x="230" y="390" text-anchor="middle" font-size="13" fill="#333" font-weight="600">Screen Top 1%</text>
            <text x="230" y="405" text-anchor="middle" font-size="10" fill="#888">(~8,600 patients)</text>

            <!-- ═══ GROUP 2: Screen Top 10% ═══ -->
            <!-- Full Data: 55% → height=293, top=67 -->
            <rect x="400" y="67" width="55" height="293" fill="#006598" rx="3"/>
            <text x="427" y="59" text-anchor="middle" font-size="12" fill="#006598" font-weight="700">55%</text>

            <!-- FHIR Portable: 50% → height=267, top=93 -->
            <rect x="465" y="93" width="55" height="267" fill="#6f42c1" rx="3"/>
            <text x="492" y="86" text-anchor="middle" font-size="12" fill="#6f42c1" font-weight="700">50%</text>

            <!-- Random: 10% → height=53, top=307 -->
            <rect x="530" y="307" width="55" height="53" fill="#ccc" rx="1"/>
            <text x="557" y="300" text-anchor="middle" font-size="11" fill="#999" font-weight="600">10%</text>

            <!-- Group label -->
            <text x="490" y="390" text-anchor="middle" font-size="13" fill="#333" font-weight="600">Screen Top 10%</text>
            <text x="490" y="405" text-anchor="middle" font-size="10" fill="#888">(~85,800 patients)</text>

            <!-- Legend -->
            <rect x="160" y="420" width="360" height="18" rx="3" fill="none"/>
            <rect x="160" y="422" width="12" height="12" fill="#006598" rx="2"/>
            <text x="176" y="432" font-size="10" fill="#333">Full Data (30)</text>
            <rect x="280" y="422" width="12" height="12" fill="#6f42c1" rx="2"/>
            <text x="296" y="432" font-size="10" fill="#333">FHIR Portable (31)</text>
            <rect x="420" y="422" width="12" height="12" fill="#ccc" rx="2"/>
            <text x="436" y="432" font-size="10" fill="#333">Random Screening</text>

          </svg>
        </div>
        <p style="font-size:0.82rem; color:#666; margin-top:6px;">Both models dramatically outperform random screening. At the top 1% threshold, each model finds 20&ndash;22&times; more CRC cases than random &mdash; the equivalent of screening 13&ndash;14 patients per cancer found, vs. 286 for unguided screening.</p>

        <hr class="divider">

        <!-- ── Observations ── -->
        <h3>Key Observations</h3>

        <div class="callout callout-success">
          <p class="callout-title">Full Data: What Survived Winnowing</p>
          <p>
            Of the 8 clinical data categories that went into feature engineering, the final 30-feature
            model draws from just <strong>5 categories</strong>: vitals (7 features), ICD-10 diagnoses (8),
            labs (6), visit history (6), and demographics (3). Notably, <strong>no medication features</strong>
            (outpatient or inpatient) and <strong>no procedure features</strong> survived 29 rounds of winnowing.
            This suggests the core CRC signal in Mercy&rsquo;s data comes from physiological markers
            (labs, vitals), diagnostic history (ICD codes), and care utilization patterns (visits) &mdash;
            not from what was prescribed or what procedures were performed.
          </p>
          <p style="margin-top:10px; font-size:0.88rem; color:#555;">
            This finding has important implications for portability: 3 of the 5 surviving categories
            (labs, diagnoses, demographics) are standard FHIR resources, while vitals and visit patterns
            require varying levels of integration. The FHIR Portable run will test whether the model
            can maintain performance without the visit features.
          </p>
        </div>

        <div class="callout callout-info" style="border-left-color:#6f42c1;">
          <p class="callout-title">FHIR Portable Feasibility</p>
          <p>The FHIR Portable model uses only features available in standard US FHIR R4 implementations, starting from 118 candidate features (vs. 169 for Full Data). Despite losing all visit history and PCP status features, it delivers <strong>19.9&times; lift at top 1%</strong> vs. Full Data&rsquo;s 22.1&times; &mdash; a gap of just 10%. In clinical terms: <strong>14 patients screened per cancer found</strong> (vs. 13 for Full Data, vs. 286 for random screening). The two models share a core of <strong>18 common features</strong> but diverge in how they compensate: Full Data leverages visit utilization patterns (6 features), while FHIR Portable recruits additional vital sign derivatives (4 more than Full Data) and retains procedure and medication features that Full Data winnowed away.</p>
        </div>

        <hr class="divider">


      </div>

      <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           TAB 6: Context & Next Steps
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <div class="tab-pane" id="tab6" role="tabpanel" aria-labelledby="btn-tab6" tabindex="0" hidden>
        <h2 class="section-header">Next Steps</h2>

        <p>
          The FHIR Portable model &mdash; designed to work with any Cures Act&ndash;compliant EHR &mdash; is the deployment target.
          The path forward focuses on agreeing on which features are universally available, rebuilding the model
          on the finalized feature set, and delivering a turnkey product for clinical deployment.
        </p>

        <hr class="divider">

        <h3 style="margin-top:28px; color:#1a1a1a;">Immediate Action Items</h3>

        <ol style="list-style: none; padding-left: 0; counter-reset: step-counter; margin: 0 0 24px 0;">
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">1.</span>
            <strong>Lucem determines universally available features</strong> &mdash; review the candidate feature list in <a href="appendix_b_feature_catalog.html" style="color:#006598;">Appendix B</a> and decide which features are universally available across all target hospitals.
          </li>
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">2.</span>
            <strong>Rebuild the FHIR Portable model</strong> on the agreed-upon feature set. The feature selection pipeline reruns once with the finalized set to produce the turnkey deployment model.
          </li>
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">3.</span>
            <strong>Hyperparameter tuning &amp; calibration</strong> &mdash; Optuna tuning on the rebuilt model, followed by isotonic calibration + quantile transformation to produce a 0&ndash;100 risk score and clinical high-risk flag.
          </li>
          <li style="padding: 12px 16px 12px 52px; position: relative; margin-bottom: 8px; background: #f5f7fa; border-radius: 6px; border-left: 4px solid #bf5412; counter-increment: step-counter;">
            <span style="position: absolute; left: 14px; top: 11px; font-weight: 700; color: #bf5412; font-size: 1.1rem;">4.</span>
            <strong>Model replication in Vertex AI</strong> on Google Cloud Platform for production deployment and integration with clinical workflows.
          </li>
        </ol>

        <hr class="divider">

        <h3 style="margin-top:28px; color:#1a1a1a;">What Lucem Needs to Provide</h3>

        <div class="callout callout-info">
          <p class="callout-title">Feature Availability Confirmation</p>
          <p>The FHIR Portable model currently uses 31 features drawn from standard FHIR R4 data. To finalize the turnkey product, Lucem should review the full candidate feature list in <a href="appendix_b_feature_catalog.html" style="color:#006598; font-weight:600;">Appendix B</a> and determine which features they believe are universally available across target hospitals.</p>
          <p style="margin-top:10px;">The current model delivers <strong>20&times; lift at top 1%</strong> and <strong>5&times; at top 10%</strong> with its 31-feature set. Lucem may determine that fewer or more features than the current set are universally available &mdash; the model will be rebuilt once on the agreed-upon feature set, and performance will be re-evaluated on the final configuration.</p>
        </div>

        <hr class="divider">

        <h3 style="margin-top:28px; color:#1a1a1a;">Reference Materials</h3>
        <div class="metric-cards">
          <div class="metric-card" style="text-align:left; padding:16px;">
            <div style="font-weight:700; color:#006598; margin-bottom:6px;">Appendix A</div>
            <div style="font-size:0.88rem; color:#555;"><a href="appendix_a_model_features.html" style="color:#006598;">Per-Model Features</a> &mdash; final feature sets with SHAP importance rankings</div>
          </div>
          <div class="metric-card" style="text-align:left; padding:16px;">
            <div style="font-weight:700; color:#006598; margin-bottom:6px;">Appendix B</div>
            <div style="font-size:0.88rem; color:#555;"><a href="appendix_b_feature_catalog.html" style="color:#006598;">Feature Catalog</a> &mdash; all 169 candidate features with FHIR availability</div>
          </div>
          <div class="metric-card" style="text-align:left; padding:16px;">
            <div style="font-weight:700; color:#006598; margin-bottom:6px;">Appendix C</div>
            <div style="font-size:0.88rem; color:#555;"><a href="appendix_c_technical_context.html" style="color:#006598;">Technical Context</a> &mdash; published model comparisons, FAQ, and known limitations</div>
          </div>
          <div class="metric-card" style="text-align:left; padding:16px;">
            <div style="font-weight:700; color:#006598; margin-bottom:6px;">Appendix D</div>
            <div style="font-size:0.88rem; color:#555;"><a href="appendix_d_cohort_selection.html" style="color:#006598;">Cohort Selection</a> &mdash; inference population scope, training cohort methodology, and label quality</div>
          </div>
        </div>

      </div>

    </div><!-- /tab-content -->
  </main><!-- /main content -->

  <!-- ============================================================
       FOOTER
       ============================================================ -->
  <footer role="contentinfo">
    <p>Generated for Mercy and Lucem Clinical Analytics | February 2026</p>
    <p class="tagline">&ldquo;Your life is our life&rsquo;s work&rdquo;</p>
    <div class="footer-links">
      <a href="appendix_a_model_features.html">Appendix A: Model Features</a>
      <a href="appendix_b_feature_catalog.html">Appendix B: Feature Catalog</a>
      <a href="appendix_c_technical_context.html">Appendix C: Technical Context</a>
      <a href="appendix_d_cohort_selection.html">Appendix D: Cohort Selection</a>
    </div>
  </footer>

  <!-- ============================================================
       JAVASCRIPT
       ============================================================ -->
  <script>
    (function() {
      'use strict';

      /* ----------------------------------------------------------
         TAB SWITCHING (with ARIA support)
         ---------------------------------------------------------- */
      var tabButtons = document.querySelectorAll('.tab-btn');
      var tabPanes   = document.querySelectorAll('.tab-pane');

      function switchTab(targetId, focusPanel) {
        // Deactivate all buttons and hide all panes
        tabButtons.forEach(function(btn) {
          btn.classList.remove('active');
          btn.setAttribute('aria-selected', 'false');
          btn.setAttribute('tabindex', '-1');
        });
        tabPanes.forEach(function(pane) {
          pane.classList.remove('active');
          pane.setAttribute('hidden', '');
        });
        // Activate the target button and pane
        var targetBtn = document.querySelector('.tab-btn[data-tab="' + targetId + '"]');
        var targetPane = document.getElementById(targetId);
        if (targetBtn) {
          targetBtn.classList.add('active');
          targetBtn.setAttribute('aria-selected', 'true');
          targetBtn.setAttribute('tabindex', '0');
        }
        if (targetPane) {
          targetPane.classList.add('active');
          targetPane.removeAttribute('hidden');
          if (focusPanel) targetPane.focus();
        }
      }

      tabButtons.forEach(function(btn) {
        btn.addEventListener('click', function() {
          var tabId = this.getAttribute('data-tab');
          switchTab(tabId);
        });
      });

      /* Keyboard navigation for tabs (arrow keys, Home, End) */
      document.querySelector('.tab-nav').addEventListener('keydown', function(e) {
        var tabs = Array.from(tabButtons);
        var current = tabs.indexOf(document.activeElement);
        if (current < 0) return;

        var next;
        switch (e.key) {
          case 'ArrowRight':
          case 'ArrowDown':
            next = (current + 1) % tabs.length;
            break;
          case 'ArrowLeft':
          case 'ArrowUp':
            next = (current - 1 + tabs.length) % tabs.length;
            break;
          case 'Home':
            next = 0;
            break;
          case 'End':
            next = tabs.length - 1;
            break;
          default:
            return;
        }
        e.preventDefault();
        tabs[next].focus();
        switchTab(tabs[next].getAttribute('data-tab'));
      });

      /* ----------------------------------------------------------
         COLLAPSIBLE SECTIONS (with ARIA and keyboard support)
         ---------------------------------------------------------- */
      function toggleCollapsible(header) {
        var collapsible = header.closest('.collapsible');
        if (!collapsible) return;

        var body = collapsible.querySelector('.collapsible-body');
        var icon = header.querySelector('.collapse-icon');
        var isOpen = body && body.classList.contains('open');

        if (body) body.classList.toggle('open');
        if (icon) icon.classList.toggle('open');
        header.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
      }

      document.addEventListener('click', function(e) {
        var header = e.target.closest('.collapsible-header');
        if (header) toggleCollapsible(header);
      });

      document.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          var header = e.target.closest('.collapsible-header');
          if (header) {
            e.preventDefault();
            toggleCollapsible(header);
          }
        }
      });

      /* ----------------------------------------------------------
         HANDLE TAB LINK FROM URL HASH (cross-file tab linking)
         ---------------------------------------------------------- */
      function handleHash() {
        var hash = window.location.hash;
        if (hash && hash.startsWith('#tab')) {
          var tabId = hash.substring(1);
          switchTab(tabId);
        }
      }

      // Check on load
      handleHash();

      // Check on hash change
      window.addEventListener('hashchange', handleHash);

      /* ----------------------------------------------------------
         INITIALIZE: Ensure first tab is active on page load
         ---------------------------------------------------------- */
      if (!document.querySelector('.tab-pane.active')) {
        switchTab('tab1');
      }

    })();
  </script>

</body>
</html>
